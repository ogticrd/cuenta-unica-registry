 /**
 * Jeeliz Weboji - https://github.com/jeeliz/jeelizWeboji
 *
 * Copyright 2018 Jeeliz ( https://jeeliz.com )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

var JEEFACETRANSFERAPI=(function(){function ja(b){var d=new XMLHttpRequest;d.open("GET",a.Ta+a.save,!0);d.withCredentials=!1;d.onreadystatechange=function(){4!==d.readyState||200!==d.status&&0!==d.status||b(d.responseText)};d.send()}function va(){for(var b=a.Cb,d=Array(b),e=0;e<b;++e)d[e]=0;return d}function xa(b,d,e){b=Math.min(Math.max((e-b)/(d-b),0),1);return b*b*(3-2*b)}function za(b,d,e){return Math.min(Math.max((e-b)/(d-b),0),1)}function Ba(b,d,e,h){return Math.pow(Math.min(Math.max((h-b)/(d-b),0),1),e)}
function Da(b){switch(b){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}
function Ea(b,d){var e=d%8;return b[(d-e)/8]>>7-e&1}
function Fa(b){var d=JSON.parse(b);b=d.ne;var e=d.nf,h=d.n,k="undefined"===typeof btoa?Buffer.from(d.data,"base64").toString("latin1"):atob(d.data),l=k.length,m;d=new Uint8Array(l);for(m=0;m<l;++m)d[m]=k.charCodeAt(m);k=new Float32Array(h);l=new Float32Array(e);m=b+e+1;var n,q;for(n=0;n<h;++n){var g=m*n;var r=0===Ea(d,g)?1:-1;var u=g+1;var B=1,H=0;for(q=u+b-1;q>=u;--q)H+=B*Ea(d,q),B*=2;q=H;u=d;B=g+1+b;H=l;var E=0,L=H.length;for(g=B;g<B+L;++g)H[E]=Ea(u,g),++E;for(g=u=0;g<e;++g)u+=l[g]*Math.pow(2,-g-
1);r=0===u&&0===q?0:r*(1+u)*Math.pow(2,1+q-Math.pow(2,b-1));k[n]=r}return k}
var v=function(){function b(f,x){f=t.createShader(f);t.shaderSource(f,x);t.compileShader(f);return t.getShaderParameter(f,t.COMPILE_STATUS)?f:!1}function d(f,x){f=b(t.VERTEX_SHADER,f);x=b(t.FRAGMENT_SHADER,x);var A=t.createProgram();t.attachShader(A,f);t.attachShader(A,x);t.linkProgram(A);return A}function e(f){void 0===f.aa&&(f.aa="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===f.da&&(f.da=["a0"]);void 0===f.U&&(f.U=
[2]);if(void 0===f.precision||"highp"===f.precision)f.precision=q;f.id=m++;void 0!==f.fd&&f.fd.forEach(function(A,ca){f.c=f.c.replace(A,f.qa[ca])});f.Sa=0;f.U.forEach(function(A){f.Sa+=4*A});f.pa=d(f.aa,"precision "+f.precision+" float;\n"+f.c);f.l={};f.f.forEach(function(A){f.l[A]=t.getUniformLocation(f.pa,A)});f.attributes={};f.V=[];f.da.forEach(function(A){var ca=t.getAttribLocation(f.pa,A);f.attributes[A]=ca;f.V.push(ca)});if(f.h){t.useProgram(f.pa);l=f;k=f.id;for(var x in f.h)t.uniform1i(f.l[x],
f.h[x])}f.Wd=!0}function h(f){Ga.md(N);k!==f.id&&(N.ta(),k=f.id,l=f,t.useProgram(f.pa),f.V.forEach(function(x){0!==x&&t.enableVertexAttribArray(x)}))}var k=-1,l=!1,m=0,n=!1,q="highp",g=["u1"],r=["u0"],u={u1:0},B={u0:0},H={u1:0,u2:1},E={u3:0},L={s0:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:g,h:u},s1:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:g,h:u,precision:"lowp"},s2:{c:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",
f:["u1","u2"],h:H},s3:{c:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",f:g,h:u},s4:{c:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",f:["u1","mask"],h:H},s5:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",f:g,h:u},s6:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",
f:g,h:u},s7:{c:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",f:["u0","u4"],h:B},s8:{c:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 g=vec4(.25,.25,.25,.25),e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,g);gl_FragColor=b*e;}",f:["u0","u4"],h:B},s9:{c:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",
f:g,h:u},s10:{c:"uniform sampler2D u1,u5;uniform float u6;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);gl_FragColor=mix(b,a,u6*f);}",f:["u1","u5","u6"],h:{u1:0,u5:1}},s11:{c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u7)+texture2D(u1,vv0+u7*vec2(1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,1.)));}",f:["u1","u7"],h:u},s12:{c:"uniform sampler2D u1;uniform vec4 u8;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 k(float a){if(a==0.)return vec4(0.,0.,0.,0.);float l=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),m=c+127.,b=(a/exp2(c)-1.)*8388608.,d=m/2.,n=fract(d)*2.,o=floor(d),p=e(b,0.,8.),q=e(b,8.,16.),r=n*128.+e(b,16.,23.),j=l+o;return vec4(p,q,r,j)/255.;}void main(){float a=dot(texture2D(u1,vv0),u8);gl_FragColor=k(a);}",
f:["u1","u8"],h:u},s13:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",f:r,h:B},s14:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(e,a);}",f:r,h:B},s15:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-e,a,step(0.,a));}",f:r,h:B},s16:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-e;gl_FragColor=mix(.1*b,a,step(0.,a));}",
f:r,h:B},s17:{c:"uniform sampler2D u0,u6,u9;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u6,vv0),d=texture2D(u9,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",f:["u0","u6","u9"],h:{u0:0,u6:1,u9:2}},s18:{c:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",f:r,h:B},s19:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(.5,.5,.5,.5);void main(){vec4 a=texture2D(u0,vv0),b=log(e+a);gl_FragColor=b;}",
f:r,h:B},s20:{c:"uniform sampler2D u0;uniform float gain;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=exp(a);}",f:["u0","u10"],h:B},s21:{c:"uniform sampler2D u0,u11;uniform float u12;const vec2 f=vec2(.5,.5);const float g=1e-5;const vec4 h=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u11,f);float b=u12*u12;vec4 c=max(b*a,g*h);gl_FragColor=texture2D(u0,vv0)/c;}",f:["u0","u13","u12"],h:{u0:0,u13:1}},s22:{c:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){float a=u14.x*u14.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u14.y),g=floor(u14.x*fract(b*u14.y)),f=(g*u14.y+d)/a;gl_FragColor=texture2D(u1,f+c/a);}",
f:["u1","u14"],h:u},s23:{c:"uniform sampler2D u15,u16,u17;varying vec2 vv0;void main(){vec4 a=texture2D(u17,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u15,b),e=texture2D(u16,c);gl_FragColor=d*e;}",f:["u15","u16","u17"],h:{u16:0,u15:1,u17:2}},s24:{c:"uniform float u18;uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec2 a=fract(vv0*u18);vec4 b=texture2D(u15,vv0),c=texture2D(u16,a);gl_FragColor=b*c;}",f:["u16","u15","u18"],h:{u16:0,u15:1}},s25:{c:"uniform float u18;uniform sampler2D u15,u16,u19,u20,u21,u22;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 i=vv0*u18,m=floor(i),c=i-m;vec4 n=texture2D(u15,vv0),d=texture2D(u16,c),a=texture2D(u22,vv0);a=a*255.;vec4 o=texture2D(u19,c),p=texture2D(u20,c),q=texture2D(u21,c),j=step(-g,-a),b=e-j,k=b*step(-e-g,-a);b*=e-k;vec4 h=b*step(-2.*e-g,-a);b*=e-h;vec4 l=b;d=j*d+k*o+h*p+l*q,gl_FragColor=n*d;}",
f:"u15 u16 u18 u22 u19 u20 u21".split(" "),h:{u16:0,u15:1,u22:3,u19:4,u20:5,u21:6}},s26:{c:"uniform sampler2D u15,u16,u23;uniform float u18,u24,u25,u26;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u24*vv0),g=u24*vv0-a;float b=u18/u24;vec2 c=floor(g*b),d=g*b-c,h=(a+d)/u24;float l=u24*u26/u18;vec2 m=l*c,i=(m+d*u25)/u26,e=step(i,j);vec4 n=texture2D(u15,h),o=texture2D(u16,i),p=n*o*e.x*e.y,k=texture2D(u23,h);gl_FragColor=p*u25*u25+k;}",f:"u15 u16 u18 u24 u25 u26 u23".split(" "),h:{u16:0,
u15:1,u23:2}},s27:{c:"uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0),b=texture2D(u16,vv0);gl_FragColor=a*b;}",f:["u15","u16"],h:{u16:0,u15:1}},s28:{c:"uniform sampler2D u1,u23;uniform float u27;varying vec2 vv0;void main(){gl_FragColor=texture2D(u23,vv0)+u27*texture2D(u1,vv0);}",f:["u1","u23","u27"],h:{u1:0,u23:1}},s29:{c:"varying vec2 vv0;uniform sampler2D u1;const vec4 g=vec4(1.,1.,1.,1.),e=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,e)*g;}",
f:g,h:u,precision:"lowp"},s30:{c:"varying vec2 vv0;uniform sampler2D u1;uniform float u28;const vec3 e=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u28)).rgb,c=texture2D(u1,vv0+vec2(u28,u28)).rgb,d=texture2D(u1,vv0+vec2(u28,0.)).rgb;gl_FragColor=vec4(dot(a,e),dot(b,e),dot(c,e),dot(d,e));}",f:["u1","u28"],h:u,precision:"lowp"},s31:{c:"varying vec2 vv0;uniform sampler2D u1;uniform float u28;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u28)).rgb,c=texture2D(u1,vv0+vec2(u28,u28)).rgb,d=texture2D(u1,vv0+vec2(u28,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
f:["u1","u28"],h:u,precision:"lowp"},s32:{c:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u29;const vec4 g=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u29,vv0.y-u29))*1.,a-=texture2D(u1,vec2(vv0.x-u29,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u29,vv0.y+u29))*1.,a+=texture2D(u1,vec2(vv0.x+u29,vv0.y-u29))*1.,a+=texture2D(u1,vec2(vv0.x+u29,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u29,vv0.y+u29))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u29,vv0.y-u29))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u29))*2.,b-=texture2D(u1,vec2(vv0.x+u29,vv0.y-u29))*1.,b+=texture2D(u1,vec2(vv0.x-u29,vv0.y+u29))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u29))*2.,b+=texture2D(u1,vec2(vv0.x+u29,vv0.y+u29))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),f=texture2D(u2,vv0);gl_FragColor=f.a*e.r*g;}",
f:["u1","u2","u29"],h:H},s33:{c:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u29;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float i=0.;vec2 l=k*u29,b,c;float d,a,g=0.;for(float f=-4.;f<=4.;f+=1.)for(float e=-4.;e<=4.;e+=1.)b=vec2(f,e),d=length(b)/2.,a=exp(-d*d),c=vv0+l*b,a=1.,i+=a*texture2D(u1,c).r,g+=a;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,c).r-i/g)*j;}",f:["u1","u2","u29"],h:H},s34:{c:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 h=vec2(.5,.5),i=vec2(1.,0.),j=vec2(0.,1.);void main(){vec2 a=vv0-u7*h;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*i),d=texture2D(u3,a+u7*j),k=texture2D(u3,a+u7),l=e(b,c),g=e(d,k);gl_FragColor=e(l,g);}",
f:["u3","u7"],h:E},s35:{c:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;const vec2 j=vec2(1.,0.),k=vec2(0.,1.),l=vec2(2.,0.),m=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*j),d=texture2D(u3,a+u7*k),g=texture2D(u3,a+u7),i=e(b,c),h=e(d,g);return e(i,h);}void main(){vec2 a=vv0+u7*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u7*l),d=f(a+u7*2.),g=f(a+u7*m),i=e(b,c),h=e(d,g);gl_FragColor=e(i,h);}",f:["u3","u7"],h:E},s36:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",
f:["u1"],h:u,precision:"lowp"},s37:{c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const float d=15444.;void main(){vec4 a=1001./d*texture2D(u1,vv0-3.*u7)+2002./d*texture2D(u1,vv0-2.*u7)+3003./d*texture2D(u1,vv0-u7)+3432./d*texture2D(u1,vv0)+3003./d*texture2D(u1,vv0+u7)+2002./d*texture2D(u1,vv0+2.*u7)+1001./d*texture2D(u1,vv0+3.*u7);gl_FragColor=a;}",f:["u7","u1"],h:u,precision:"lowp"},s38:{c:"uniform sampler2D u1,u30,u31;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float h=.1;void main(){vec4 a=texture2D(u30,vv0),b=texture2D(u31,vv0),c=texture2D(u1,vv0),d=max(g*h,b-a*a),f=sqrt(d);gl_FragColor=(c-a)/f;}",
f:["u1","u30","u31"],h:{u1:0,u30:1,u31:2}}},Q={s39:{c:"uniform float u18,u32;uniform sampler2D u15,u16,u23;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u23,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u18,xyTo=floor(vv0*u18+eps2);float weightSize=toSparsity*u18;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u32*(xyPatch-halfFromSparsity))/u18,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u15,uvWeight)*texture2D(u16,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
f:["u18","u15","u16","u23","u32"],qa:["1.1111","gl_FragColor\\*=2.2222;"]},s40:{c:"uniform float u18,u32,u26;uniform sampler2D u15,u16,u23;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u23,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u26,xyTo=floor(vv0*u18+eps2);float weightSize=fromSparsity*u26;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u18;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u32*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u26,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u15,uvWeight)*texture2D(u16,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
f:"u18 u26 u15 u16 u23 u32".split(" "),qa:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},N={Ka:function(){return n},i:function(){if(!n){q="highp";for(var f in L)e(L[f],f);v.set("s0");t.enableVertexAttribArray(0);f=Ha.i();n=!0;return f}},Yb:function(f){f.forEach(function(x){N.Xa(x)})},Xa:function(f){L[f.id]=f;e(f,f.id)},pb:function(f,x,A){x||(x=f);L[x]=Object.create(Q[f]);Q[f].qa&&Q[f].qa.forEach(function(ca,pa){L[x].c=L[x].c.replace(new RegExp(ca,"g"),A[pa])});e(L[x],x)},set:function(f){h(L[f])},
vc:function(f){return"undefined"!==typeof L[f]},Id:function(){return l.Fd},ta:function(){-1!==k&&(k=-1,l.V.forEach(function(f){0!==f&&t.disableVertexAttribArray(f)}))},Pa:function(){var f=0;l.V.forEach(function(x,A){A=l.U[A];t.vertexAttribPointer(x,A,t.FLOAT,!1,l.Sa,f);f+=4*A})},Ed:function(){t.enableVertexAttribArray(0)},Qa:function(){t.vertexAttribPointer(l.V[0],2,t.FLOAT,!1,8,0)},ge:function(f,x){t.uniform1i(l.l[f],x)},A:function(f,x){t.uniform1f(l.l[f],x)},Z:function(f,x,A){t.uniform2f(l.l[f],
x,A)},he:function(f,x){t.uniform2fv(l.l[f],x)},ie:function(f,x){t.uniform3fv(l.l[f],x)},Nb:function(f,x,A,ca){t.uniform3f(l.l[f],x,A,ca)},Ob:function(f,x){t.uniform4fv(l.l[f],x)},je:function(f,x){t.uniformMatrix2fv(l.l[f],!1,x)},ke:function(f,x){t.uniformMatrix3fv(l.l[f],!1,x)},le:function(f,x){t.uniformMatrix4fv(l.l[f],!1,x)},C:function(f,x){N.set(f);x.forEach(function(A){switch(A.type){case "4f":t.uniform4fv(l.l[A.name],A.value);break;case "3f":t.uniform3fv(l.l[A.name],A.value);break;case "2f":t.uniform2fv(l.l[A.name],
A.value);break;case "1f":t.uniform1f(l.l[A.name],A.value);break;case "1i":t.uniform1i(l.l[A.name],A.value);break;case "mat2":t.uniformMatrix2fv(l.l[A.name],!1,A.value);break;case "mat3":t.uniformMatrix3fv(l.l[A.name],!1,A.value);break;case "mat4":t.uniformMatrix4fv(l.l[A.name],!1,A.value)}})},Pd:function(){return"lowp"}};return N}(),t=!1,Ja=function(){function b(g){console.log("ERROR in ContextFeedForward : ",g);return!1}function d(){if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){var g=
navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);g=2<g.length?[parseInt(g[1],10),parseInt(g[2],10),parseInt(g[3]||0,10)]:[0,0,0];return 12===g[0]||13===g[0]?!0:!1}return/(Mac)/i.test(navigator.platform)&&((g=navigator.userAgent)?(g=g.match(/Mac OS X (\d+)_(\d+)/)||g.match(/Mac OS X (\d+).(\d+)/),g=!g||3>g.length?!1:[parseInt(g[1],10),parseInt(g[2],10)]):g=!1,g&&10===g[0]&&15===g[1])?!0:!1}var e=!1,h=!1,k=!1,l=!1,m=!0,n=!1,q={o:function(){return e.width},F:function(){return e.height},ia:function(){return e},
Hd:function(){return t},m:function(){return m},flush:function(){t.flush()},zc:function(){n||(n=new Uint8Array(e.width*e.height*4));t.readPixels(0,0,e.width,e.height,t.RGBA,t.UNSIGNED_BYTE,n);return n},Kd:function(){return e.toDataURL("image/jpeg")},Ld:function(){D.D();h||(h=document.createElement("canvas"),k=h.getContext("2d"));h.width=e.width;h.height=e.height;var g=q.zc(),r=k.createImageData(h.width,h.height),u,B,H=h.width,E=h.height,L=r.data;for(B=0;B<E;++B){var Q=E-B-1;for(u=0;u<H;++u){var N=
4*(B*H+u);var f=4*(Q*H+u);L[N]=g[f];L[N+1]=g[f+1];L[N+2]=g[f+2];L[N+3]=g[f+3]}}k.putImageData(r,0,0);return h.toDataURL("image/png")},Jd:function(g){!h&&g&&(h=document.createElement("canvas"),k=h.getContext("2d"));var r=g?h:document.createElement("canvas");r.width=e.width;r.height=e.height;(g?k:r.getContext("2d")).drawImage(e,0,0);return r},i:function(g){g.gb&&!g.fb?e=document.getElementById(g.gb):g.fb&&(e=g.fb);e||(e=document.createElement("canvas"));e.width=g&&void 0!==g.width?g.width:512;e.height=
g&&void 0!==g.height?g.height:512;"undefined"===typeof g&&(g={});void 0===g.premultipliedAlpha&&(g.premultipliedAlpha=!1);void 0===g.Ja&&(g.Ja=!0);void 0===g.antialias&&(g.antialias=!1);var r={antialias:g.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:g.premultipliedAlpha,stencil:!1,depth:g.Ja};d()||(t=e.getContext("webgl2",r));t?m=!0:((t=e.getContext("webgl",r))||(t=e.getContext("experimental-webgl",r)),m=!1);if(!t)return b("WebGL is not enabled");(l=t.getExtension("WEBGL_lose_context"))&&
e.addEventListener("webglcontextlost",g.Zc,!1);if(!Ia.i())return b("Not enough capabilities");if(!Ia.gc()&&m)return b("Your configuration cannot process color buffer float");t.clearColor(0,0,0,0);t.disable(t.DEPTH_TEST);t.disable(t.BLEND);t.disable(t.DITHER);t.disable(t.STENCIL_TEST);t.disable(t.SCISSOR_TEST);t.GENERATE_MIPMAP_HINT&&t.hint(t.GENERATE_MIPMAP_HINT,t.FASTEST);t.disable(t.SAMPLE_ALPHA_TO_COVERAGE);t.disable(t.SAMPLE_COVERAGE);return!0},Vd:function(){if(!v.i())return!1;t.depthFunc(t.LEQUAL);
t.clearDepth(1);return!0}};return q}(),Ga=function(){var b="undefined"===typeof v?JEShaders:v;return{md:function(d){b!==d&&(b.ta(),b=d)},Ka:function(){return b.Ka()},Qa:function(){b.Qa()},Pa:function(){b.Pa()},ta:function(){b.ta()},set:function(d){b.set(d)}}}(),J=function(){var b=null,d=null,e=0,h=-2,k=-2,l=!1,m={reset:function(){k=h=-2},i:function(){l||(b=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,b),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),t.STATIC_DRAW),d=t.createBuffer(),
t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,d),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),t.STATIC_DRAW),m.Aa(),l=!0)},a:function(n){var q=e++,g=n.K?n.K.length:0,r="undefined"===typeof n.mode?t.STATIC_DRAW:n.mode,u=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,u);t.bufferData(t.ARRAY_BUFFER,n.Ub instanceof Float32Array?n.Ub:new Float32Array(n.Ub),r);h=q;if(n.K){var B=t.createBuffer();t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,B);if(65536>n.K.length){var H=Uint16Array;var E=t.UNSIGNED_SHORT;var L=
2}else H=Uint32Array,E=t.UNSIGNED_INT,L=4;t.bufferData(t.ELEMENT_ARRAY_BUFFER,n.K instanceof H?n.K:new H(n.K),r);k=q}var Q={fc:function(N){h!==q&&(t.bindBuffer(t.ARRAY_BUFFER,u),h=q);N&&Ga.Pa()},dc:function(){k!==q&&(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,B),k=q)},bind:function(N){Q.fc(N);Q.dc()},Cd:function(){t.drawElements(t.TRIANGLES,g,E,0)},Dd:function(N,f){t.drawElements(t.TRIANGLES,N,E,f*L)},remove:function(){t.deleteBuffer(u);n.K&&t.deleteBuffer(B);Q=null}};return Q},Aa:function(){-1!==h&&(t.bindBuffer(t.ARRAY_BUFFER,
b),h=-1);-1!==k&&(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,d),k=-1)},g:function(n,q){n&&J.Aa();q&&Ga.Qa();t.drawElements(t.TRIANGLES,3,t.UNSIGNED_SHORT,0)},yc:function(){t.deleteBuffer(b);t.deleteBuffer(d)}};return m}(),D=function(){var b=null,d=null,e=null,h=!1,k={s:-2,wc:1};return{i:function(){if(!h){b=t.createFramebuffer();var l=Ia.m();d=l&&t.DRAW_FRAMEBUFFER?t.DRAW_FRAMEBUFFER:t.FRAMEBUFFER;e=l&&t.READ_FRAMEBUFFER?t.READ_FRAMEBUFFER:t.FRAMEBUFFER;h=!0}},Nd:function(){return d},Fa:function(){return e},
P:function(){return t.FRAMEBUFFER},Qd:function(){return k},Gd:function(){return b},a:function(l){void 0===l.sb&&(l.sb=!1);var m=l.$?l.$:!1,n=l.width,q=void 0!==l.height?l.height:l.width,g=b,r=!1,u=!1,B=0;m&&(n=n?n:m.o(),q=q?q:m.F());var H={Lb:function(){u||(g=t.createFramebuffer(),u=!0,B=k.wc++)},Xb:function(){H.Lb();H.j();r=t.createRenderbuffer();t.bindRenderbuffer(t.RENDERBUFFER,r);t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,n,q);t.framebufferRenderbuffer(d,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,
r);t.clearDepth(1)},bind:function(E,L){B!==k.s&&(t.bindFramebuffer(d,g),k.s=B);m&&m.j();L&&t.viewport(0,0,n,q);E&&t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)},wd:function(){B!==k.s&&(t.bindFramebuffer(d,g),k.s=B)},clear:function(){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)},zd:function(){t.clear(t.COLOR_BUFFER_BIT)},Ad:function(){t.clear(t.DEPTH_BUFFER_BIT)},nd:function(){t.viewport(0,0,n,q)},j:function(){B!==k.s&&(t.bindFramebuffer(d,g),k.s=B)},rtt:function(E){m=E;k.s!==B&&(t.bindFramebuffer(t.FRAMEBUFFER,
g),k.s=B);E.j()},D:function(){t.bindFramebuffer(d,null);k.s=-1},resize:function(E,L){n=E;q=L;r&&(t.bindRenderbuffer(t.RENDERBUFFER,r),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,n,q))},remove:function(){t.bindFramebuffer(d,g);t.framebufferTexture2D(d,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0);r&&t.framebufferRenderbuffer(d,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,null);t.bindFramebuffer(d,null);t.deleteFramebuffer(g);r&&t.deleteRenderbuffer(r);H=null}};l.sb&&H.Xb();return H},D:function(){t.bindFramebuffer(d,
null);k.s=-1},sd:function(){t.bindFramebuffer(d,null);t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT);t.viewport(0,0,Ia.o(),Ia.F());k.s=-1},reset:function(){k.s=-2},H:function(){0!==k.s&&(t.bindFramebuffer(d,b),k.s=0)},clear:function(){t.viewport(0,0,Ia.o(),Ia.F());t.clear(t.COLOR_BUFFER_BIT)}}}(),K=function(){function b(c){t.bindTexture(t.TEXTURE_2D,c)}function d(c){pa[0]=c;c=sa[0];var C=c>>16&32768,I=c>>12&2047,O=c>>23&255;return 103>O?C:142<O?C|31744|((255==O?0:1)&&c&8388607):113>O?(I|=2048,C|(I>>
114-O)+(I>>113-O&1)):C=(C|O-112<<10|I>>1)+(I&1)}function e(c){var C=new Uint16Array(c.length);c.forEach(function(I,O){C[O]=d(I)});return C}function h(){if(null!==na.Ga)return na.Ga;var c=l(e([1,1,1,1]));return null===c?!0:na.Ga=c}function k(){if(null!==na.Ha)return na.Ha;var c=l(new Uint8Array([255,255,255,255]));return null===c?!0:na.Ha=c}function l(c){if(!Ga.Ka()||!E)return null;try{var C=t.getError(),I=W.a({isFloat:!1,B:!0,array:c,width:1});C=t.getError();if(C!==t.NO_ERROR)return!1}catch(O){return!1}D.D();
t.viewport(0,0,1,1);t.clearColor(0,0,0,0);t.clear(t.COLOR_BUFFER_BIT);Ga.set("s0");I.ab(0);J.g(!1,!0);c=new Uint8Array(4);t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,c);c=.9<c[0];I.remove();D.H();return c}var m=0,n=null,q=0,g=null,r=!1,u=null,B=null,H=null,E=!1,L=!1,Q=null,N=null,f=null,x=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],A=!1,ca=!1,pa=new Float32Array(1),sa=new Int32Array(pa.buffer),na={Ga:null,Ha:null},W={i:function(){if(!E){B=[t.RGB,!1,t.RGB,t.RGBA];H=[t.RGB,!1,t.RGB,t.RGBA];n=[t.TEXTURE0,
t.TEXTURE1,t.TEXTURE2,t.TEXTURE3,t.TEXTURE4,t.TEXTURE5,t.TEXTURE6,t.TEXTURE7];A="undefined"!==typeof JEContext;ca="undefined"!==typeof Ia;A&&JEContext.be()&&n.push(t.TEXTURE8,t.TEXTURE9);g=[-1,-1,-1,-1,-1,-1,-1,-1];u=[t.UNSIGNED_BYTE,t.FLOAT,t.FLOAT];if(!r){for(var c=new Float32Array(16384),C=0;16384>C;++C)c[C]=2*Math.random()-1;r={random:W.a({isFloat:!0,isPot:!0,array:c,width:64}),Sb:W.a({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}E=!0}},Ic:function(){W.td()},Td:function(){return r.Sb},
td:function(){u[1]=Ia.ja()},hd:function(){H=B=[t.RGBA,t.RGBA,t.RGBA,t.RGBA]},cd:function(c,C){v.set("s1");D.D();var I=c.o(),O=c.F();t.viewport(0,0,I,O);c.b(0);J.g(!1,!1);t.readPixels(0,0,I,O,t.RGBA,t.UNSIGNED_BYTE,C)},xc:function(c,C,I){t.activeTexture(t.TEXTURE0);m=0;var O=t.createTexture();b(O);var X=Ia.m()&&t.RGBA32F?t.RGBA32F:t.FLOAT;C=C instanceof Float32Array?C:new Float32Array(C);var Y=Math.log2(C.length);Y!==Math.floor(Y)&&(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,
t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE));t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST);t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,I);t.texImage2D(t.TEXTURE_2D,0,t.RGBA,c.o(),c.F(),0,t.RGBA,X,C);b(null);t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1);D.H();v.set("s0");c.u();t.clearColor(0,0,0,0);t.clear(t.COLOR_BUFFER_BIT);b(O);J.g(!0,!1);t.deleteTexture(O)},a:function(c){function C(){b(da);qa&&t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,qa);c.isPot?(t.texParameteri(t.TEXTURE_2D,
t.TEXTURE_WRAP_S,c.ub?t.MIRRORED_REPEAT:t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,c.L?t.MIRRORED_REPEAT:t.REPEAT)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE));c.ma&&"undefined"!==typeof JESETTINGS&&t.texParameterf(t.TEXTURE_2D,JEContext.Md().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.vd);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,c.isLinear?t.LINEAR:t.NEAREST);c.isLinear?t.texParameteri(t.TEXTURE_2D,
t.TEXTURE_MIN_FILTER,c.isMipmap&&!wa?t.NEAREST_MIPMAP_LINEAR:t.LINEAR):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,c.isMipmap&&!wa?t.NEAREST_MIPMAP_NEAREST:t.NEAREST);ka=B[c.Y-1];ea=H[c.Y-1];ma=u[I];if(Ia.m()){var p=t.RGBA32F;ka===t.RGBA&&ma===t.FLOAT&&p&&(ea=p);ka===t.RGB&&ma===t.FLOAT&&p&&(ea=p,ka=t.RGBA)}if(c.B&&!c.isFloat||c.isFloat&&c.isMipmap&&Ha.Lc())(p=t.RGBA16F)&&(ea=p),ma=Ia.ja();c.xb&&"undefined"!==typeof t.texStorage2D&&(y=c.xb);c.vb&&4===c.Y&&(ka=JEContext.Rd());if(c.v)t.texImage2D(t.TEXTURE_2D,
0,ea,ka,ma,c.v);else if(c.url)t.texImage2D(t.TEXTURE_2D,0,ea,ka,ma,Z);else if(U){try{t.getError(),t.texImage2D(t.TEXTURE_2D,0,ea,M,z,0,ka,ma,U),t.getError()!==t.NO_ERROR&&(t.texImage2D(t.TEXTURE_2D,0,ea,M,z,0,ka,ma,null),t.getError()!==t.NO_ERROR&&t.texImage2D(t.TEXTURE_2D,0,t.RGBA,M,z,0,t.RGBA,t.UNSIGNED_BYTE,null))}catch(ha){t.texImage2D(t.TEXTURE_2D,0,ea,M,z,0,ka,ma,null)}c.isKeepArray||(U=null)}else t.texImage2D(t.TEXTURE_2D,0,ea,M,z,0,ka,ma,null);if(c.isMipmap)if(!wa&&F)F.Ea(),G=!0;else if(wa){p=
Math.log(Math.min(M,z))/Math.log(2);var w;la=Array(1+p);la[0]=da;for(w=1;w<=p;++w){var P=Math.pow(2,w);var oa=M/P;P=z/P;var fa=t.createTexture();b(fa);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST);t.texImage2D(t.TEXTURE_2D,0,ea,oa,P,0,ka,ma,null);b(null);la[w]=fa}G=!0}b(null);g[m]=-1;qa&&t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1);S=!0;aa&&F&&(aa(F),aa=!1)}"undefined"===typeof c.isFloat&&(c.isFloat=!1);"undefined"===typeof c.B&&
(c.B=!1);"undefined"===typeof c.isPot&&(c.isPot=!0);"undefined"===typeof c.isLinear&&(c.isLinear=!1);"undefined"===typeof c.isMipmap&&(c.isMipmap=!1);"undefined"===typeof c.Ba&&(c.Ba=!1);void 0===c.ma&&(c.ma=!1);void 0===c.L&&(c.L=!1);void 0===c.ub&&(c.ub=!1);void 0===c.vb&&(c.vb=!1);void 0===c.Y&&(c.Y=4);void 0===c.tb&&(c.tb=!1);"undefined"===typeof c.isFlipY&&(c.isFlipY=c.url||c.array?!0:!1);"undefined"===typeof c.isKeepArray&&(c.isKeepArray=!1);c.data&&(c.array="string"===typeof c.data?Fa(c.data):
c.isFloat?new Float32Array(c.data):new Uint8Array(c.data),c.isFlipY=!1);var I=0,O=c.v?!0:!1,X=null,Y=null,ba=!1,ra=null;c.isFloat&&(c.B=!0);c.B&&(I=1);c.tb||Ia.m()||!c.isFloat||!ca||Ia.cb()||(c.isFloat=!1);c.isFloat&&(I=2);c.ma&&A&&!JEContext.Xd()&&(c.ma=!1);var da=t.createTexture(),aa=c.Ba,Z=null,U=!1,M=0,z=0,S=!1,T=q++,R=!1,ia,ta,Ca,Aa,ea,ka,ma,qa=c.isFlipY,wa=c.B&&c.isMipmap&&"undefined"!==typeof Ha&&!Ha.ic()?!0:!1,la=null,y=-1,G=!1;"undefined"!==typeof c.width&&c.width&&(M=c.width,z="undefined"!==
typeof c.height&&c.height?c.height:M);var F={get:function(){return da},o:function(){return M},F:function(){return z},Ud:function(){return c.url},Yd:function(){return c.isFloat},$d:function(){return c.B},ae:function(){return c.isLinear},Ea:function(){t.generateMipmap(t.TEXTURE_2D)},bb:function(p,w){wa?(p||(p=F.jb()),F.za(w),b(la[p]),g[w]=-1):F.b(w)},jb:function(){-1===y&&(y=Math.log(M)/Math.log(2));return y},ib:function(p){if(wa){p||(p=F.jb());v.set("s11");F.za(0);var w,P=M,oa=z;for(w=1;w<=p;++w)P/=
2,oa/=2,v.Z("u7",.25/P,.25/oa),t.viewport(0,0,P,oa),b(la[w-1]),t.framebufferTexture2D(D.P(),t.COLOR_ATTACHMENT0,t.TEXTURE_2D,la[w],0),J.g(!1,1===w);g[0]=-1}else F.Ea()},za:function(p){p!==m&&(t.activeTexture(n[p]),m=p)},b:function(p){if(!S)return!1;F.za(p);if(g[p]===T)return!1;b(da);g[p]=T;return!0},ab:function(p){t.activeTexture(n[p]);m=p;b(da);g[p]=T},j:function(){t.framebufferTexture2D(D.P(),t.COLOR_ATTACHMENT0,t.TEXTURE_2D,da,0)},u:function(){t.viewport(0,0,M,z);t.framebufferTexture2D(D.P(),t.COLOR_ATTACHMENT0,
t.TEXTURE_2D,da,0)},pe:function(){t.framebufferTexture2D(D.P(),t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)},resize:function(p,w){M=p;z=w;C()},clone:function(p){p=W.a({width:M,height:z,B:c.B,isFloat:c.isFloat,isLinear:c.isLinear,L:c.L,isFlipY:p?!qa:qa,isPot:c.isPot});Ga.set("s0");D.H();p.j();t.viewport(0,0,M,z);F.b(0);J.g(!0,!0);return p},nd:function(){t.viewport(0,0,M,z)},remove:function(){t.deleteTexture(da);F=null},refresh:function(){F.ab(0);qa&&t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0);O?t.texImage2D(t.TEXTURE_2D,
0,ea,ka,t.UNSIGNED_BYTE,c.v):t.texImage2D(t.TEXTURE_2D,0,ea,M,z,0,ka,ma,U);qa&&t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1)},eb:function(){var p=M*z*4;ta=[new Uint8Array(p),new Uint8Array(p),new Uint8Array(p),new Uint8Array(p)];ia=[new Float32Array(ta[0].buffer),new Float32Array(ta[1].buffer),new Float32Array(ta[2].buffer),new Float32Array(ta[3].buffer)];Ca=new Uint8Array(4*p);Aa=new Float32Array(Ca.buffer);R=!0},Oa:function(){R||F.eb();t.readPixels(0,0,M,4*z,t.RGBA,t.UNSIGNED_BYTE,Ca);var p,w=M*z,P=2*
w,oa=3*w;for(p=0;p<w;++p)ia[0][p]=Aa[p],ia[1][p]=Aa[p+w],ia[2][p]=Aa[p+P],ia[3][p]=Aa[p+oa];return ia},Ca:function(){D.D();v.set("s12");F.b(0);for(var p=0;4>p;++p)t.viewport(0,z*p,M,z),v.Ob("u8",x[p]),J.g(!1,0===p)},qe:function(p){var w=ma===u[0]&&!k();b(da);qa&&t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,qa);w?(ba||(X=document.createElement("canvas"),X.width=M,X.height=z,Y=X.getContext("2d"),ra=Y.createImageData(M,z),ba=!0),ra.data.set(p),Y.putImageData(ra,0,0),t.texImage2D(t.TEXTURE_2D,0,ea,ka,ma,X)):t.texImage2D(t.TEXTURE_2D,
0,ea,M,z,0,ka,ma,p);g[m]=T;qa&&t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1)},re:function(p,w){b(da);t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,w);t.texImage2D(t.TEXTURE_2D,0,ea,ka,ma,p);g[m]=T;w&&t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1)},ee:function(p,w){var P=M*z,oa=4*P;p=c.B?p?"RGBE":"JSON":"RGBA";w&&(p=w);w=Ia.m()&&!1;switch(p){case "RGBE":var fa="s41";break;case "JSON":fa=w?"s0":"s12";break;case "RGBA":case "RGBAARRAY":fa="s6"}R||("RGBA"===p||"RGBE"===p||"RGBAARRAY"===p?(ta=new Uint8Array(oa),R=!0):"JSON"!==
p||w||F.eb());D.D();v.set(fa);F.b(0);if("RGBA"===p||"RGBE"===p||"RGBAARRAY"===p){t.viewport(0,0,M,z);J.g(!0,!0);t.readPixels(0,0,M,z,t.RGBA,t.UNSIGNED_BYTE,ta);if("RGBAARRAY"===p)return{data:ta};L||(Q=document.createElement("canvas"),N=Q.getContext("2d"),L=!0);Q.width=M;Q.height=z;f=N.createImageData(M,z);f.data.set(ta);N.putImageData(f,0,0);var ha=Q.toDataURL("image/png")}else if("JSON"===p)if(w)ha=new Float32Array(P),t.viewport(0,0,M,z),J.g(!0,!0),t.readPixels(0,0,M,z,t.RGBA,t.FLOAT,ha);else{for(ha=
0;4>ha;++ha)t.viewport(0,z*ha,M,z),v.Ob("u8",x[ha]),J.g(!ha,!ha);F.Oa();ha=Array(P);for(fa=0;fa<P;++fa)ha[4*fa]=ia[0][fa],ha[4*fa+1]=ia[1][fa],ha[4*fa+2]=ia[2][fa],ha[4*fa+3]=ia[3][fa]}return{format:p,data:ha,width:M,height:z,isMirrorY:c.L,isFlipY:"RGBA"===p?c.isFlipY:!c.isFlipY}}};c.isMipmap&&!wa&&S&&!G&&(F.Ea(),G=!0);if(c.url)b(da),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null),Z=new Image,Z.Bd="Anonymous",Z.crossOrigin="Anonymous",Z.src=c.url,Z.onload=function(){M=Z.width;
z=Z.height;C()};else if(c.v){var ya=function(){M=void 0!==c.v.videoWidth?c.v.videoWidth:c.v.width;z=void 0!==c.v.videoHeight?c.v.videoHeight:c.v.height;M?C():setTimeout(ya,1)};ya()}else c.array?(c.B&&!c.isFloat?c.array instanceof Uint16Array?(U=c.array,C()):h()?(U=e(c.array),C()):(C(),W.xc(F,c.array,qa)):(U=c.isFloat?c.array instanceof Float32Array?c.array:new Float32Array(c.array):c.array instanceof Uint8Array?c.array:new Uint8Array(c.array),C()),c.isKeepArray||(U&&U!==c.array&&(U=null),delete c.array)):
C();F.Gc=F.o;aa&&S&&(aa(F),aa=!1);return F},D:function(c){c!==m&&(t.activeTexture(n[c]),m=c);g[c]=-1;b(null)},xd:function(c){r.random.b(c)},reset:function(){for(var c=0;c<n.length;++c)g[c]=-1;m=-1},de:function(){m=-1},me:function(){for(var c=0;c<n.length;++c)W.D(c)},yc:function(){r&&(r.random.remove(),r.Sb.remove())},oe:function(c,C){if("RGBA"===c.format||"RGBE"===c.format){var I=new Image;I.src=c.data;I.onload=function(){W.a({L:c.isMirrorY,isFlipY:c.isFlipY,isFloat:!1,v:I,Ba:function(O){if("RGBA"===
c.format)C(O);else{var X=c.width,Y=c.height,ba=W.a({L:c.isMirrorY,isFloat:!0,width:X,height:Y,isFlipY:c.isFlipY});D.H();t.viewport(0,0,X,Y);v.set("s42");ba.j();O.b(0);J.g(!0,!0);W.D(0);C(ba);t.flush();setTimeout(O.remove,50)}}})}}else"JSON"===c.format?C(W.a({isFloat:!0,isFlipY:c.isFlipY,width:c.width,height:c.height,array:new Float32Array(c.data)})):C(!1)}};return W}(),Ka={a:function(b){var d=[K.a(b),K.a(b)],e=[d[1],d[0]],h=e,k={Mb:function(l){h[1].j();h[0].b(l);k.Rb()},fe:function(l){h[1].u();h[0].b(l);
k.Rb()},Rb:function(){h=h===d?e:d},refresh:function(){h[0].refresh();h[1].refresh()},b:function(l){h[0].b(l)},Bc:function(){return h[0]}};return k}},Ia=function(){function b(){d="undefined"===typeof Ja?JEContext:Ja;e=!0}var d=null,e=!1,h=!1,k=!1,l=!1,m=!1,n=!1,q=!1,g=!1,r=!1,u=!1,B=!1,H=!0,E=!0,L=!0,Q=null,N="undefined"===typeof window?{}:window,f={i:function(){if(e)return!0;b();f.hb();f.Da();f.tc();f.uc();D.i();K.i();if(!f.oc())return!1;J.i();K.Ic();return!0},o:function(){e||b();return d.o()},F:function(){e||
b();return d.F()},m:function(){e||b();return d.m()},tc:function(){B=(u=t.getExtension("EXT_color_buffer_float")||t.getExtension("WEBGL_color_buffer_float")||t.getExtension("OES_color_buffer_float"))?!0:!1;N.GL_EXT_COLORBUFFERFLOAT=u},uc:function(){t.getExtension("EXT_color_buffer_half_float")||t.getExtension("WEBGL_color_buffer_half_float")||t.getExtension("OES_color_buffer_half_float")},hb:function(){if(!h){this.m()||(k=t.getExtension("OES_texture_float")||t.getExtension("MOZ_OES_texture_float")||
t.getExtension("WEBKIT_OES_texture_float"),m=(N.GL_EXT_FLOAT=k)?!0:!1);if(m||this.m())l=t.getExtension("OES_texture_float_linear")||t.getExtension("MOZ_OES_texture_float_linear")||t.getExtension("WEBKIT_OES_texture_float_linear"),N.GL_EXT_FLOATLINEAR=l;h=!0}},Da:function(){if(!r){if(!this.m()){if(n=t.getExtension("OES_texture_half_float")||t.getExtension("MOZ_OES_texture_half_float")||t.getExtension("WEBKIT_OES_texture_half_float"))Q=n.HALF_FLOAT_OES,q=!0;!Q&&t.HALF_FLOAT&&(Q=t.HALF_FLOAT);!Q&&t.FLOAT&&
(Q=t.FLOAT);N.GL_EXT_HALFFLOAT=n}if(q||this.m())g=t.getExtension("OES_texture_half_float_linear")||t.getExtension("MOZ_OES_texture_half_float_linear")||t.getExtension("WEBKIT_OES_texture_half_float_linear"),N.GL_EXT_HALFFLOATLINEAR=g;r=!0}},ja:function(){if(f.m())return t.HALF_FLOAT;f.Da();return q?Q:t.FLOAT},cb:function(){return H},hc:function(){return E},yd:function(){return L},gc:function(){return B},qc:function(){E=H=!0;var x=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,x);var A=t.createTexture();
t.bindTexture(t.TEXTURE_2D,A);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST);t.texImage2D(t.TEXTURE_2D,0,f.m()&&t.RGBA32F?t.RGBA32F:t.RGBA,1,1,0,t.RGBA,t.FLOAT,null);t.framebufferTexture2D(D.P(),t.COLOR_ATTACHMENT0,t.TEXTURE_2D,A,0);var ca=t.checkFramebufferStatus(D.Fa());ca!==t.FRAMEBUFFER_COMPLETE&&(H=!1);t.texImage2D(t.TEXTURE_2D,0,f.m()&&t.RGBA16F?t.RGBA16F:t.RGBA,1,1,0,t.RGBA,f.ja(),null);t.framebufferTexture2D(D.P(),
t.COLOR_ATTACHMENT0,t.TEXTURE_2D,A,0);ca=t.checkFramebufferStatus(D.Fa());ca!==t.FRAMEBUFFER_COMPLETE&&(E=!1);t.bindTexture(t.TEXTURE_2D,null);t.bindFramebuffer(t.FRAMEBUFFER,null);t.deleteTexture(A);t.deleteFramebuffer(x)},pc:function(){var x=D.a({width:1});x.Lb();var A=K.a({width:1,isFloat:!0,Y:3});x.j();A.j();t.flush();t.checkFramebufferStatus(D.Fa())!==t.FRAMEBUFFER_COMPLETE?(K.hd(),L=!1):L=!0;x.remove();A.remove()},oc:function(){f.qc();if(!H&&!E)return!1;f.pc();return!0}};return f}(),Ha=function(){function b(E,
L,Q,N){t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,N?t.NEAREST_MIPMAP_NEAREST:t.LINEAR);try{var f=t.getError();f!==t.NO_ERROR&&console.log("GLERR in test_mipmapping() :",f);t.texImage2D(t.TEXTURE_2D,0,E,2,2,0,t.RGBA,L,Q);f=t.getError();if(f!==t.NO_ERROR)return!1}catch(x){return!1}N&&t.generateMipmap(t.TEXTURE_2D);J.Aa();J.g(!1,!0);t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,n);f=t.getError();f===t.INVALID_OPERATION&&"undefined"!==typeof t.PIXEL_PACK_BUFFER&&(t.bindBuffer(t.PIXEL_PACK_BUFFER,
null),t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,n),f=t.getError());return f!==t.NO_ERROR?!1:0!==n[0]}function d(E){return Ia.cb()&&b(u,t.FLOAT,new Float32Array(g),E)?(l=k.Va,!0):!1}function e(E){return Ia.hc()?b(B,Ia.ja(),new Uint16Array(g),E)||b(B,t.FLOAT,new Float32Array(g),E)?(l=k.va,!0):!1:!1}var h=!1,k={Va:3,va:2,RGBA8:0},l=k.RGBA8,m,n=new Uint8Array(4),q=[.8,1,.8,1],g=q.concat(q,q,q),r=!0,u,B,H={i:function(){Ia.hb();Ia.Da();B=u=t.RGBA;if(Ja.m()){var E=t.RGBA32F;E&&(u=E);(E=t.RGBA16F)&&(B=
E)}J.i();D.reset();D.D();t.viewport(0,0,1,1);v.set("s0");h=!0;m=t.createTexture();t.activeTexture(t.TEXTURE0);t.bindTexture(t.TEXTURE_2D,m);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST);if(e(!0)||d(!0))return!0;r=!1;if(e(!1)||d(!1))return!0;if(Ja.m()){B=u=t.RGBA;if(e(!0)||d(!0))return!0;r=!1;if(e(!1)||d(!1))return!0}return!1},ic:function(){return r},Od:function(){return l},
Zd:function(){h||H.i();return l===k.Va},Lc:function(){h||H.i();return l===k.va}};return H}(),La={a:function(b){var d=K.a(b.alpha),e=K.a(b.beta);return{sc:function(){d.b(1);e.b(2)}}}},Oa={a:function(b){var d=b.pd;d.index=b.index;d.M=b.M;d.parent=b.parent;switch(d.type){case "input":b=Ma.a(d);break;default:b=Na.a(d)}return b}},Ma={a:function(b){var d=null,e=!1,h=!1,k=!1,l=!1,m=null,n="undefined"===typeof b.preprocessing?!1:b.preprocessing,q="undefined"===typeof b.preprocessingSize?b.size:b.preprocessingSize;
b.mask&&(e=!0,a&&void 0!==a.bc&&(b.mask=a.bc+b.mask),d=K.a({isFloat:!1,url:b.mask}));var g=!1;b.customInputShader&&(g="s43",v.Xa({name:"_",id:g,c:b.customInputShader,f:["uSource"],precision:"lowp"}),v.C(g,[{type:"1i",name:"_",value:0}]));switch(n){case "sobel":m="s32";k=!0;break;case "meanNormalization":m="s33";k=!0;break;case "grayScale":m="s29";k=!1;break;case "grayScaleTilt":m="s30";l=!0;k=!1;break;case "rgbGrayTilt":m="s31";l=!0;k=!1;break;case "copy":m=g?g:"s0";break;case "inputLightRegulation":m=
g?g:"s29";Pa.i({rb:q,Eb:b.size,zb:b.nBlurPass,Kc:!1});h=!0;break;case "direct":case "none":m=!1;break;default:m="s3"}l&&v.C(m,[{name:"u28",type:"1f",value:b.tilt}]);e&&(m+="Mask");var r=K.a({isFloat:!1,isPot:!1,width:b.size}),u={o:function(){return q},ka:function(){return u.o()},Ec:function(){return h?Pa.lb():r},w:function(){D.H();m&&(v.set(m),k&&v.A("u29",1/b.size),r.u(),e&&d.b(1),J.g(!1,!1),r.b(0),h&&Pa.ad(r))}};return u}},Na={a:function(b){"undefined"===typeof b.disableNormalize&&(b.disableNormalize=
!1);var d=[],e=[],h=null,k=null,l=!1,m=null,n=!0,q=null,g=-1,r=b.isReorganize?b.isReorganize:!1,u=b.kernelsNumber?!0:!1,B=b.dynPelu?La.a(b.dynPelu):!1,H=B?!0:!1,E={isEnabled:!1},L=null;if("softmax"===b.type){b.activation="softmax";b.size=Math.pow(2,Math.ceil(Math.log2(Math.sqrt(b.num_classes))));b.sparsity="undefined"!==typeof b.sparsity?b.sparsity:b.M.ka();b.gain="undefined"!==typeof b.gain?b.gain:1;v.C("s20",[{type:"1f",name:"u10",value:b.gain}]);var Q=K.a({isFloat:!0,isPot:!1,width:b.size}),N=
K.a({isFloat:!0,isPot:!1,width:b.size,isMipmap:!0});n=!1;for(var f=new Uint8Array(Math.pow(4*b.size,2)),x=0;x<b.size*b.size;++x){var A=x<b.num_classes?255:0;f[4*x]=A;f[4*x+1]=A;f[4*x+2]=A;f[4*x+3]=A}var ca=K.a({isFloat:!1,isPot:!1,width:b.size,array:f})}else b.cost?(b.sparsity="undefined"!==typeof b.sparsity?b.sparsity:b.M.ka(),n=!1):"full"===b.connectivityUp&&(b.sparsity=b.M.ka());var pa={elu:"s15",elu01:"s16",relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",softplus:"s19",softmax:"s20",dynPelu:"s17"}[b.activation],
sa=b.sparsity*b.sparsity,na=!1,W=b.size;if(b.maxPooling){switch(b.maxPooling.size){case 2:var c="s34";break;case 4:c="s35"}na=!0;W/=b.maxPooling.size;var C=K.a({isFloat:!0,isPot:!1,width:W})}var I=void 0!==b.Yc&&b.Yc?!0:!1,O=null,X=null,Y=null;I&&(O="s44"+b.index.toString(),v.pb("s44",O,[((b.normalization.n-1)/2).toFixed(1)]),v.C(O,[{type:"1i",name:"u1",value:0},{type:"2f",name:"u7",value:[1/b.size,1/b.size]},{type:"1f",name:"u6",value:b.normalization.alpha},{type:"1f",name:"u9",value:b.normalization.beta},
{type:"1f",name:"u33",value:b.normalization.k}]),f={isFloat:!0,isPot:!0,width:b.size},X=K.a(f),Y=K.a(f));var ba=null,ra=-1,da=null,aa=null,Z=null;n&&(aa=K.a({isFloat:!0,isPot:!1,width:b.size}));var U=K.a(b.bias),M={o:function(){return b.size},ka:function(){return W},kb:function(){return b.num_classes},ec:function(z){L.b(z)},bd:function(){b.remap&&b.remap.isEnabled&&(E={isEnabled:!0,Nc:K.a({isFloat:!1,isFlipY:!1,array:new Uint8Array(b.remap.maskTexture.data),width:b.remap.maskTexture.width,isPot:!1}),
layers:b.remap.layers.map(function(z){return b.parent.Cc(z)}),depth:b.remap.depth})},kd:function(){switch(b.connectivityUp){case "gaussian":Z=Qa.a(b.connectivity);break;case "direct":Z=Ra.a(b.connectivity);break;case "square":Z=Sa.a(b.connectivity);break;case "squareFast":Z=Ta.a(b.connectivity,b.activation);break;case "full":Z=Ua.a(b.connectivity);break;case "conv":g=b.kernelsNumber,Z=Va.a(b.connectivity),r&&(q=K.a({width:W,isFloat:!0,isFlipY:!1,isPot:!1}))}if(Z.N){var z=b.size*b.sparsity;ra=Math.log(z/
b.size)/Math.log(2);ba=K.a({isMipmap:!0,isFloat:!0,isPot:!0,width:z,xb:ra});da=K.a({isFloat:!0,isPot:!0,width:b.size})}},w:function(z,S){L=z;Z.N?(ba.u(),u&&U.b(2),Z.w(E),ba.b(0),ba.ib(ra),da.u(),u?v.set("s0"):(v.set("s28"),v.A("u27",sa),U.b(1)),ba.bb(ra,0),J.g(!1,!1),v.set(pa),I?X.j():aa.j(),da.b(0),H&&B.sc(),J.g(!1,!1)):(aa.u(),U.b(1),Z.w());I&&(v.set(O),Y.j(),X.b(0),J.g(!1,!1),v.set("s45"),v.A("u6",1),aa.j(),Y.b(1),J.g(!1,!1));if(n)return na?(C.u(),aa.b(0),v.set(c),v.Z("u7",1/b.size,1/b.size),J.g(!1,
!1),S=C):S=aa,S.b(0),r&&(q.j(),v.set("s22"),v.Z("u14",g,W/g),J.g(!1,!1),S=q,q.b(0)),S;if("softmax"===b.type)return v.set("s20"),aa.b(0),Q.j(),J.g(!1,!1),b.disableNormalize?z=Q:(v.set("s2"),Q.b(0),ca.b(1),N.j(),J.g(!1,!1),v.set("s0"),k.u(),N.b(0),N.ib(!1),J.g(!1,!1),v.set("s21"),h.u(),N.bb(!1,0),v.A("u12",aa.Gc()),k.b(1),J.g(!1,!1),z=h),S?M.Fb(z):!1;if(b.cost){v.set("gpuRawAvg"===l?"s8":"s7");S=aa;b.disableNormalize||(v.A("u4",1/b.size),h.u(),aa.b(0),J.g(!1,!1),S=h);switch(l){case "cpuRGBA2Float":S.Ca();
S=M.Fb(S);m(S);break;case "gpuRawAvg":case "gpuRaw":S.b(0);case "none":m(S)}return!1}},lc:function(z){z&&"undefined"!==typeof z.Db&&(l=z.Db,m=z.$c);aa=K.a({isFloat:!0,isPot:!0,isMipmap:"softmax"===b.type,width:b.size});"softmax"===b.type&&(k=K.a({isFloat:!0,isPot:!0,width:1}));z="undefined"!==typeof b.num_classes&&b.num_classes?b.num_classes:b.size*b.size;for(var S=0,T=0,R=0;S<z;++S)d.push(T+(b.size-1-R)*b.size),e.push([-1,-1,-1,-1]),++T,T===b.size&&(T=0,++R);b.disableNormalize||(h=K.a({isFloat:!0,
isPot:!0,width:b.size}))},Fb:function(z){z.Ca();var S=z.Oa();d.forEach(function(T,R){e[R][0]=S[0][T];e[R][1]=S[1][T];e[R][2]=S[2][T];e[R][3]=S[3][T]});return e}};b.M&&M.kd(b.M);return M}};
function Wa(){var b={},d=null,e=null,h=null;b||(b={});this.Cc=function(k){return d[k]};this.gd=function(k){var l=null;d=k.map(function(m,n){return l=m=Oa.a({index:n,parent:this,pd:m,M:l})});e=d[0];h=d[d.length-1];d.forEach(function(m,n){0!==n&&m.bd()})};this.w=function(k,l){var m=l;d.forEach(function(n){m=n.w(m,k)});return m};this.Ac=function(){return e.o()};this.Fc=function(){return h.o()};this.lb=function(){return h.Ec()};this.jd=function(k){h.lc(k)};this.kb=function(){return h.kb()}}
var Ra={a:function(b){var d=K.a(b.weights);delete b.weights.data;return{N:!0,X:function(){return 1},Hc:function(){return d},w:function(){v.set("s27");d.b(1);J.g(!1,!1)}}}},Ua={a:function(b){var d=b.fromLayerSize,e=K.a(b.weights);return{N:!0,X:function(){return d},w:function(h){if(h.isEnabled){v.set("s25");h.Nc.b(3);var k,l=Math.min(h.layers.length,h.depth);for(k=0;k<l;++k)h.layers[k].ec(4+k)}else v.set("s24");v.A("u18",b.toLayerSize);e.b(1);J.g(!1,!1)}}}},Qa={a:function(b){var d=b.toSparsity*b.toLayerSize,
e=d/b.fromLayerSize,h=K.a(b.weights);K.a({width:d,isFloat:!0,array:new Float32Array(b.fromBindings),isPot:!0});var k=K.a({width:d,isFloat:!0,array:new Float32Array(b.toBindings),isPot:!0});return{N:!0,X:function(){return e},w:function(){v.set("s23");h.b(1);k.b(2);J.g(!1,!0)}}}},Sa={a:function(b){var d=b.fromLayerSize,e=b.toLayerSize,h=b.toSparsity,k=h*e,l=k/d,m=d/e,n,q,g,r,u=0,B=0,H=0,E=Array(h*e*h*e*4),L=Array(h*e*h*e*4),Q=Array(d*d);for(n=0;n<Q.length;++n)Q[n]=0;var N=Math.floor(h/2),f=.5/e,x=.5/
d,A=.5/k;for(n=0;n<e;++n)for(q=0;q<e;++q){var ca=Math.round(n*m);var pa=Math.round(q*m);var sa=n/e;var na=q/e;sa+=f;na+=f;for(g=0;g<h;++g)for(r=0;r<h;++r){var W=u/k;var c=B/k;var C=ca+g-N;var I=pa+r-N;0>C&&(C+=d);0>I&&(I+=d);C>=d&&(C-=d);I>=d&&(I-=d);var O=C/d;var X=I/d;c=1-c-1/k;O+=x;X+=x;W+=A;c+=A;var Y=n*h+g,ba=q*h+r;ba=e*h-ba-1;Y=ba*e*h+Y;E[4*Y]=W;E[4*Y+1]=c;E[4*Y+2]=O;E[4*Y+3]=X;O=Q[I*d+C]++;X=O%l;C=C*l+X;I=I*l+(O-X)/l;I=d*l-1-I;I=I*d*l+C;L[4*I]=W;L[4*I+1]=c;L[4*I+2]=sa;L[4*I+3]=na;++u>=k&&(u=
0,++B);++H}}var ra=K.a(b.weights);K.a({width:k,isFloat:!0,array:new Float32Array(L),isPot:!0});L=null;var da=K.a({width:k,isFloat:!0,array:new Float32Array(E),isPot:!0});E=null;return{N:!0,X:function(){return l},w:function(){v.set("s23");ra.b(1);da.b(2);J.g(!1,!1)}}}},Va={a:function(b){var d=b.kernelsNumber,e=b.toSparsity,h=e*b.toLayerSize/b.fromLayerSize,k=K.a(b.weights);return{N:!0,X:function(){return h},Sd:function(){return e},Hc:function(){return k},w:function(){v.set("s26");v.A("u24",d);v.A("u25",
e);v.A("u18",b.toLayerSize);v.A("u26",b.fromLayerSize);k.b(1);J.g(!1,!1)}}}},Ta={a:function(b,d){var e=b.fromLayerSize,h=b.toLayerSize,k=b.toSparsity,l=b.stride?b.stride:1,m=k*h/e,n=h<e,q=e/h,g=K.a(b.weights),r="s46"+[e.toString(),h.toString(),k.toString(),l.toString(),d].join("_");v.vc(r)||(b=Da(d),h=[{type:"1f",name:"u18",value:h},{type:"1f",name:"u32",value:l}],n&&h.push({type:"1f",name:"u26",value:e}),e=[(n?m:k).toFixed(1),b],n&&e.push(q.toFixed(1)),v.pb(n?"s40":"s39",r,e),v.C(r,h.concat([{type:"1i",
name:"u16",value:0},{type:"1i",name:"u23",value:1},{type:"1i",name:"u15",value:3}])));return{N:!1,X:function(){return m},w:function(){v.set(r);g.b(3);J.g(!1,!1)}}}},Pa=function(){var b=-1,d=-1,e=-1,h=-1,k=!1,l=null,m=null,n=null,q=null,g=null;return{i:function(r){b=r.zb?r.zb:3;d=r.rb?r.rb:64;e=r.Eb?r.Eb:64;k=r.Kc?!0:!1;r={isFloat:!1,width:d,isPot:!1,isFlipY:!1};l=K.a(r);m=K.a(r);n=K.a(r);q=K.a(r);g=K.a({isFloat:!0,width:e,isPot:!1,isFlipY:!1});h=1/d},ad:function(r){v.set("s36");q.j();J.g(k,!1);v.set("s37");
for(var u=0;u<b;++u)l.j(),v.Z("u7",h,0),J.g(k,!1),n.j(),q.b(0),J.g(k,!1),m.j(),l.b(0),v.Z("u7",0,h),J.g(k,!1),q.j(),n.b(0),J.g(k,!1),u!==b-1&&m.b(0);v.set("s38");g.j();r.b(0);m.b(1);q.b(2);J.g(k,!1);g.b(0)},lb:function(){return g}}}();function Xa(b,d){b[d]=!0;b.setAttribute(d,"true")}function Ya(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}
function Za(){var b=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return 2<b.length?[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3]||0,10)]:[0,0,0]}function $a(){var b=navigator.userAgent.toLowerCase();return-1!==b.indexOf("safari")&&-1===b.indexOf("chrome")?!0:!1}function ab(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1}
function bb(b){if(!b)return b;var d=!1;if(b.video){var e=function(h){var k={};"undefined"!==typeof h.min&&(k.min=h.min);"undefined"!==typeof h.max&&(k.max=h.max);"undefined"!==typeof h.ideal&&(k.ideal=h.ideal);return k};d={};"undefined"!==typeof b.video.width&&(d.width=e(b.video.width));"undefined"!==typeof b.video.height&&(d.height=e(b.video.height));"undefined"!==typeof b.video.facingMode&&(d.facingMode=b.video.facingMode)}d={audio:b.audio,video:d};"undefined"!==typeof b.deviceId&&(d.deviceId=b.deviceId);
return d}function cb(b){var d=b.video.width;b.video.width=b.video.height;b.video.height=d;return b}
function db(b){function d(u){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(B,H){return Math.abs(B-u)-Math.abs(H-u)})}function e(u){var B=bb(b);h.push(u(B))}var h=[];if(!b||!b.video)return h;if(b.video.width&&b.video.height){if(b.video.width.ideal&&b.video.height.ideal){var k=d(b.video.width.ideal).slice(0,3),l=d(b.video.height.ideal).slice(0,3),m={},n=0;for(m.J=void 0;n<k.length;m={J:m.J},++n){m.J=k[n];var q={},g=0;for(q.I=void 0;g<l.length;q={I:q.I},++g)if(q.I=l[g],
m.J!==b.video.width.ideal||q.I!==b.video.height.ideal){var r=Math.max(m.J,q.I)/Math.min(m.J,q.I);r<4/3-.1||r>16/9+.1||e(function(u,B){return function(H){H.video.width.ideal=u.J;H.video.height.ideal=B.I;return H}}(m,q))}}}e(function(u){return cb(u)})}b.video.width&&b.video.height&&(b.video.width.ideal&&b.video.height.ideal&&e(function(u){delete u.video.width.ideal;delete u.video.height.ideal;return u}),e(function(u){delete u.video.width;delete u.video.height;return u}));b.video.facingMode&&(e(function(u){delete u.video.facingMode;
return u}),b.video.width&&b.video.height&&e(function(u){cb(u);delete u.video.facingMode;return u}));h.push({audio:b.audio,video:!0});return h}function eb(b){try{var d=window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(h){d=window.innerHeight>window.innerWidth}if(d&&b&&b.video){d=b.video.width;var e=b.video.height;d&&e&&d.ideal&&e.ideal&&d.ideal>e.ideal&&(b.video.height=d,b.video.width=e)}}
function fb(b){b.volume=0;Xa(b,"muted");if($a()){if(1===b.volume){var d=function(){b.volume=0;window.removeEventListener("mousemove",d,!1);window.removeEventListener("touchstart",d,!1)};window.addEventListener("mousemove",d,!1);window.addEventListener("touchstart",d,!1)}setTimeout(function(){b.volume=0;Xa(b,"muted")},5)}}
function gb(b,d,e,h){function k(m){l||(l=!0,e(m))}var l=!1;navigator.mediaDevices.getUserMedia(h).then(function(m){function n(){setTimeout(function(){if(b.currentTime){var q=b.videoWidth,g=b.videoHeight;if(0===q||0===g)k("VIDEO_NULLSIZE");else{q&&(b.style.width=q.toString()+"px");g&&(b.style.height=g.toString()+"px");q={jc:null,od:null,Qc:null};try{var r=m.getVideoTracks()[0];r&&(q.Qc=r,q.jc=r.getCapabilities(),q.od=r.getSettings())}catch(u){}$a()||Ya()?b.parentNode&&null!==b.parentNode?(l||d(b,m,
q),setTimeout(function(){b.play()},100)):(document.body.appendChild(b),fb(b),l||d(b,m,q),setTimeout(function(){b.style.transform="scale(0.0001,0.0001)";b.style.position="fixed";b.style.bottom="0px";b.style.right="0px";fb(b);setTimeout(function(){b.play()},100)},80)):l||d(b,m,q)}}else k("VIDEO_NOTSTARTED")},700)}"undefined"!==typeof b.srcObject?b.srcObject=m:(b.src=window.URL.createObjectURL(m),b.videoStream=m);fb(b);b.addEventListener("loadeddata",function(){var q=b.play();fb(b);"undefined"===typeof q?
n():q.then(function(){n()}).catch(function(){k("VIDEO_PLAYPROMISEREJECTED")})},!1)}).catch(function(m){k(m)})}
function hb(b,d,e){var h=ab()?document.createElement("video"):!1;if(h)if(ab()){if(e&&e.video){if(Ya()){var k=Za();(12>k[0]||12===k[0]&&2>k[1])&&eb(e)}e.video.width&&e.video.width.ideal&&(h.style.width=e.video.width.ideal+"px");e.video.height&&e.video.height.ideal&&(h.style.height=e.video.height.ideal+"px")}Xa(h,"autoplay");Xa(h,"playsinline");e&&e.audio?h.volume=0:Xa(h,"muted");gb(h,b,function(){function l(n){if(0===n.length)d("INVALID_FALLBACKCONSTRAINTS");else{var q=n.shift();gb(h,b,function(){l(n)},
q)}}var m=db(e);l(m)},e)}else d&&d("MEDIASTREAMAPI_NOTFOUND");else d&&d("VIDEO_NOTPROVIDED")}
var ib=function(){var b=0,d,e,h,k;return{i:function(l,m){b=l.length;d=m;e=l;h=new Float32Array(b);k=new Float32Array(b)},Dc:function(){return k},qd:function(l,m,n){l.forEach(function(q,g){var r=Math.min(1,e[g]*n*(m+.33*(1-m)));q=r*q+(1-r)*h[g];h[g]=q;k[g]=d[g](q)})}}}(),V={T:[],xa:!1,ya:!1,wa:!1,Wa:!1,ca:!0,ba:!1,ready:!1,initialized:!1},jb={facingMode:"user",idealWidth:320,idealHeight:240,minWidth:240,maxWidth:1280,minHeight:240,maxHeight:1280},a={save:"jeelizFaceTransferNNC.json",
Ta:"../../",$b:0,width:512,height:512,Rc:.25,Oc:.7,Vc:3,borderWidth:.4,W:.35,Wc:5,Xc:3,Ra:[.06,.08,.15],rd:55,Sc:.6,Pc:5.8,Wb:.75,Vb:1,Ya:[.03,1],ud:20,ea:.2,O:[30,55],Ua:3,cc:1/3.5,Cb:11,yb:1,Tc:1,Za:[.1,.01],dd:[.4,-.7,-.4],ed:[.3,0,0],Kb:[5,7],rc:!1,S:[0,7],ac:.001,$a:[Math.PI/10,Math.PI/6],Gb:[0,6],Hb:[.1,.4],Ib:[.009,.02],Jb:[.02,.04],Ma:8,ob:[3,7],nb:.05,Zb:[.2,.2,.15,.15,.15,.15,.2,.2,.15,.15,.2],Uc:[xa.bind(null,.05,.7),xa.bind(null,.05,.7),xa.bind(null,0,.4),xa.bind(null,0,.4),xa.bind(null,
0,.6),xa.bind(null,0,.6),za.bind(null,.1,.6),xa.bind(null,.1,.4),Ba.bind(null,.68,.77,2),Ba.bind(null,.68,.77,2),xa.bind(null,.15,.5)]};V.get_nMorphs=function(){return a.Cb};var kb=null,lb=null,mb=null;
function nb(){var b,d,e,h,k,l,m,n,q,g,r;function u(){1===++M&&(ib.i(a.Zb,a.Uc),B(),V.ready=!0,V.T.forEach(function(y){y()}),V.T.splice(0,V.T.length),H(),M=0)}function B(){O=va();X=new Uint8Array(sa*sa*4);V.get_morphTargetInfluences=function(){return O};V.get_morphTargetInfluencesStabilized=function(){return ib.Dc()};V.set_morphUpdateCallback=function(y){Y=y};V.get_rotation=function(){return ra};V.get_positionScale=function(){var y=C.Qb.Bc();y.Ca();y=y.Oa();Z[0]=1-y[1][0];Z[1]=y[2][0];Z[2]=y[3][0]*
na[0];return Z};V.get_rotationStabilized=function(){return aa};V.switch_sleep=function(y){S!==z.ra||y?S=y?z.ra:z.ha:H()};V.on_detect=function(y){y(T.G);T.Na.push(y)};V.is_detected=function(){return T.G};V.set_animateDelay=function(y){x=y}}function H(){S!==z.ha&&(S=z.ha,R.timestamp=Date.now(),A&&window.clearTimeout(A),ca&&window.cancelAnimationFrame(ca),L())}function E(){S!==z.ra&&(A=setTimeout(L,x))}function L(){a:{if("VIDEO"===U.element.nodeName){var y=U.element.currentTime-wa;0>y&&(wa=U.element.currentTime);
if(1E3*y<a.ud)break a;wa+=y}U.$.refresh();y=la.mb();y[0]===U.ga_[0]&&y[1]===U.ga_[1]||la.Tb();v.set("s48");D.H();C.Ia.u();U.$.b(0);J.g(!1,!0)}y=S===z.ha?R.oa:1;for(var G=0;G<y;++G){var F=C,ya=pa;v.set("s49");D.H();F.la.u();F.Ia.b(0);F.sa.b(1);J.g(!1,!1);F.la.b(0);ya.w(!1,F.la)}V.ca&&(D.sd(),v.set("s5"),C.Ia.b(0),J.g(!1,!1),t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE),I.b(0),J.g(!1,!1),t.disable(t.BLEND));t.flush();G=Date.now();F=G-R.timestamp;R.timestamp=G;R.Ab=y/F;R.La=R.Ab*a.ea+R.La*(1-a.ea);
R.Bb=1E3/F;R.R=R.Bb*a.ea+R.R*(1-a.ea);R.R>a.O[1]?(++R.oa,R.R=(a.O[0]+a.O[1])/2):R.R<a.O[0]&&(R.oa=Math.max(R.oa-1,a.Ua),R.R=(a.O[0]+a.O[1])/2);R.fa=a.cc/Math.max(R.La,.001);S!==z.ra&&(ca=window.requestAnimationFrame(E))}var Q,N,f=64,x=a.$b,A=!1,ca=!1,pa,sa,na,W,c,C={},I,O=!1,X,Y=!1,ba=[0,0,0],ra=[0,0,0],da=[0,0,0],aa=[0,0,0],Z=[0,0,0],U={element:null,$:null,ga_:[-1,-1]},M=0,z={Mc:-2,ra:-1,ha:0},S=z.Mc,T={na:0,G:!1,Na:[]},R={timestamp:0,Ab:0,La:0,oa:a.Ua,Bb:0,R:0,fa:1},ia=1,ta=1,Ca=1,Aa=1,ea=[0,0,0],
ka=Date.now(),ma=new Float32Array(a.Ma),qa=0,wa=0,la={qb:function(){Q=a.width;N=a.height;W=a.Rc;c=a.Oc;var y=Q/f;W*=y;c*=y;k=(1-2*a.borderWidth)/a.Wc;l=(1-2*a.W)/a.Xc;m=(c-W)/a.Vc;n=a.borderWidth;q=a.W;g=1-a.borderWidth;r=1-a.W;b=0;d=a.borderWidth;e=a.W;h=W;na=[f/Q,f/N]},Pb:function(){v.C("s49",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u34",value:1},{type:"2f",name:"u35",value:na}]);v.C("s50",[{type:"1i",name:"u34",value:0},{type:"2f",name:"u35",value:na},{type:"3f",name:"u36",value:[0,.5,1]}]);
v.C("s51",[{type:"1i",name:"u37",value:0},{type:"1i",name:"u34",value:1},{type:"1f",name:"u38",value:a.Sc},{type:"1f",name:"u39",value:a.Pc},{type:"1f",name:"u40",value:a.rd},{type:"1f",name:"u41",value:a.Wb},{type:"1f",name:"u42",value:a.Vb},{type:"1f",name:"u43",value:na[0]}]);v.C("s52",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u5",value:1},{type:"1f",name:"u44",value:a.Ya[0]},{type:"1f",name:"u45",value:a.Ya[1]}])},mc:function(){v.Yb([{id:"s48",name:"_",aa:"attribute vec2 a0;uniform vec2 u46,u47;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=u47+u46*a0;}",
da:["a0"],U:[2],c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:["u1","u46","u47"],precision:"lowp"},{id:"s49",name:"_",c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",aa:"attribute vec2 a0;uniform sampler2D u34;uniform vec2 u35;const vec2 f=vec2(.25,.5),h=vec2(.75,.5),e=vec2(.5,.5);varying vec2 vv0;void main(){vec4 a=texture2D(u34,f);vec2 b=a.gb,c=a.a*u35,d=a0*.5+e;vv0=b+(d-e)*c,gl_Position=vec4(a0,0.,1.);}",da:["a0"],
U:[2],f:["u1","u34","u35"],precision:"lowp"},{id:"s51",name:"_",aa:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",c:"uniform sampler2D u37,u34;uniform vec3 u48,u49;uniform float u38,u39,u40,u41,u42,u43,u50;varying vec2 vv0;const vec4 e=vec4(.25,.25,.25,.25);void main(){vec4 g=texture2D(u37,vec2(.4375,.9375)),h=texture2D(u37,vec2(.5625,.9375)),a=texture2D(u34,vec2(.5,.5));float c=dot(g,e),i=dot(h,e);bool d=c>u41&&c>i+u42;d?a.r=2.:a.r>u40?a.r=0.:a.r>1.9&&(a.a>u39||a.a<u38)?a.r=0.:a.r>1.9?a.r+=1.:0.;if(a.r<.9)a.gba=u48,a.r=1.;else{float j=dot(e,texture2D(u37,vec2(.0625,.9375))),k=dot(e,texture2D(u37,vec2(.1875,.9375))),l=dot(e,texture2D(u37,vec2(.3125,.9375))),b;if(a.r>1.9)b=1.-u50;else b=1.,a.r=0.;float f=a.a*u43;a.gba+=vec3(j,k,l)*u49*b*f;}gl_FragColor=a;}",
f:"u37 u34 u48 u38 u39 u40 u41 u42 u49 u43 u50".split(" ")},{id:"s50",name:"_",c:"uniform sampler2D u34;uniform vec3 u36;uniform vec2 u35;varying vec2 vv0;const vec2 i=vec2(1.,1.);void main(){vec4 g=texture2D(u34,vec2(.25,.5));vec2 h=g.gb;float j=g.a;vec2 a=j*u35,c=h+a,d=h;d-=a/2.,c-=a/2.;vec2 k=.5*(d+c),f=step(d,vv0)*step(vv0,c);float l=f.x*f.y;vec2 b=2.*abs(k-vv0)/a;b=pow(b,3.*i),gl_FragColor=vec4(l*u36*max(b.x,b.y),1.);}",f:["u34","u35","u36"],precision:"lowp"},{id:"s52",name:"_",c:"uniform sampler2D u1,u5;uniform float u44,u45,u50;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);float c=(1.-u50)*(u45-u44)+u44;gl_FragColor=mix(b,a,c*f);}",
f:["u1","u5","u44","u45","u50"]}])},Jc:function(y){var G=new Float32Array([0,a.borderWidth,a.W,0]);y.Ia=K.a({isPot:!1,ce:!0,isFloat:!1,width:Q,height:N});y.la=K.a({isPot:!0,isFloat:!1,width:f});G={width:1,height:1,isFloat:!0,isPot:!1,array:G};y.sa=Ka.a(G);y.Qb=Ka.a(G)},nc:function(){U.$=K.a({v:U.element,isPot:!1,isFloat:!1,isFlipY:!0});I=K.a({isPot:!1,isFloat:!1,width:Q,height:N})},i:function(){function y(){var p=G(a.ob[0],a.ob[1]);T.na=a.nb*p+(1-a.nb)*T.na;.6<T.na&&!T.G?(T.Na.forEach(function(w){w(!0)}),
T.G=!0):.4>T.na&&T.G&&(T.Na.forEach(function(w){w(!1)}),T.G=!1)}function G(p,w){p+=sa*w;return(X[4*p]+X[4*p+1]+X[4*p+2]+X[4*p+3])/1020}function F(){O.forEach(function(p,w){if(T.G){p=(a.yb+w)%sa;var P=a.Tc+Math.floor((a.yb+w)/sa);P=sa-1-P;p=G(p,P);O[w]=p}else O[w]=0})}function ya(p){pa=new Wa;pa.gd(p.layers);pa.jd({Db:"gpuRaw",$c:function(w){var P=C;P.sa.Mb(1);t.viewport(0,0,1,1);v.set("s51");v.A("u50",ia);v.Nb("u48",d,e,h);v.Nb("u49",1*a.Ra[0],1*a.Ra[1],1*a.Ra[2]);J.g(!1,!1);1!==++b%2&&(h+=m,h>c&&
(d+=k,h=W,d>g&&(d=n,e+=l,e>r&&(e=q))));P.Qb.Mb(1);v.set("s52");v.A("u50",ia);P.sa.b(0);J.g(!1,!1);K.cd(w,X);F();if(!a.rc&&T.G)for(w=0;3>w;++w)P=G(w+a.Kb[0],a.Kb[1]),P=(2*P-1)*a.dd[w],P+=a.ed[w],ba[w]=P;y();w=Date.now();P=w-ka;var oa=G(a.Gb[0],a.Gb[1]);Ca=za(a.Hb[0],a.Hb[1],oa);oa=G(a.S[0],a.S[1]);var fa=G(a.S[0]+1,a.S[1]),ha=G(a.S[0]+2,a.S[1]);ta=1-za(a.Jb[0],a.Jb[1],Math.sqrt(oa*oa+fa*fa+ha*ha)/P);oa=ea[0]-ba[0];fa=ea[1]-ba[1];ha=ea[2]-ba[2];P=Math.sqrt(oa*oa+fa*fa+ha*ha)/P;ea[0]=ba[0];ea[1]=ba[1];
ea[2]=ba[2];Aa=1-za(a.Ib[0],a.Ib[1],P);ia=Ca*ta*Aa;ka=w;ma[qa]=ia;qa=(qa+1)%a.Ma;for(w=0;w<a.Ma;++w)ia=Math.min(ma[w],ia);ib.qd(O,ia,R.fa);Y&&Y(ia,R.fa);if(T.G)for(w=a.Za[1]*ia+a.Za[0]*(1-ia),w*=R.fa,P=0;3>P;++P)ra[P]=w*ba[P]+(1-w)*ra[P],aa[P]=ra[P];else w=Date.now()*a.ac,da[0]=a.$a[0]*Math.sin(w),da[1]=a.$a[1]*Math.cos(w),aa[0]=da[0],aa[1]=da[1],aa[2]=da[2];w=C;D.H();I.u();v.set("s50");w.sa.b(0);J.g(!1,!1)}});p=pa.Ac();p!==f&&(f=p,la.qb(),C.la.resize(f,f),la.Pb());sa=pa.Fc();u()}la.nc();la.Jc(C);
mb?ya(mb):ja(function(p){p=JSON.parse(p);ya(p)})},ld:function(y,G){for(var F in y)"undefined"!==typeof G[F]&&(y[F]=G[F])},kc:function(y){V.xa&&V.xa();var G={video:{facingMode:{ideal:jb.facingMode},width:{min:jb.minWidth,max:jb.maxWidth,ideal:jb.idealWidth},height:{min:jb.minHeight,max:jb.maxHeight,ideal:jb.idealHeight}},audio:V.Wa};jb.deviceId&&(constraints.deviceId=jb.deviceId);hb(function(F,ya){kb=ya;V.ya&&V.ya();y(F)},function(){window.ua&&window.ua("WEBCAM_UNAVAILABLE")},G)},wb:function(y,G){la.mc();
U.element=y;lb=U.element;la.Tb();la.qb();la.Pb();la.i();G&&G()},mb:function(){var y=[-1,-1],G=U.element;"VIDEO"===G.nodeName?(y[0]=G.videoWidth,y[1]=G.videoHeight):(y[0]=G.width,y[1]=G.height);return y},Tb:function(){var y=la.mb();U.ga_[0]=y[0];U.ga_[1]=y[1];Ja.ia().width=y[0];Ja.ia().height=y[1];a.width=y[0];a.height=y[1];var G=[.5,.5],F=y[1]/y[0];y=Ja.F()/Ja.o();F>y?1>=F?G[0]*=F:G[1]/=F:(G[0]*=F,F=1/y,G[0]*=F,G[1]*=F);G[1]*=y;v.C("s48",[{type:"1i",name:"u1",value:0},{type:"2f",name:"u46",value:G},
{type:"2f",name:"u47",value:[.5,.5]}])}};return la}V.onLoad=function(b){V.ready?b():V.T.push(b)};V.set_audio=function(b){V.Wa=b};V.switch_displayVideo=function(b){V.ca=b;V.ba&&(V.ba.style.display=V.ca?"block":"none")};V.onWebcamAsk=function(b){V.xa=b};V.onContextLost=function(b){V.wa=b};V.onWebcamGet=function(b){V.ya=b};V.set_size=function(b,d){a.width=b;a.height=d};V.get_size=function(){return{width:a.width,height:a.height}};V.get_videoStream=function(){return kb};V.get_video=function(){return lb};
V.get_cv=function(){return Ja.ia()};V.set_color=function(b){v.C("s50",[{type:"3f",name:"u36",value:b}])};
V.init=function(b){var d=nb(),e=b.callbackReady?b.callbackReady:function(k){console.log("ERR:",k)},h=b.callbackReady?b.callbackReady.bind(!1):!1;if("undefined"===typeof b.canvasId)e("NO_CANVASID");else if(document.getElementById(b.canvasId))if(V.initialized)e("ALREADY_INITIALIZED");else{V.initialized=!0;window.ua=e?function(k){e(k);window.ua=!1}:!1;b.NNCpath&&(a.Ta=b.NNCpath);"undefined"!==typeof b.NNC&&(mb="string"===typeof b.NNC?JSON.parse(b.NNC):b.NNC);h&&V.T.push(h);if(!Ja.i({gb:b.canvasId,width:a.width,
height:a.height,debug:!1,Ja:!1,Zc:function(){V.wa&&V.wa()},premultipliedAlpha:!1}))return e("GL_INCOMPATIBLE"),!1;V.ba=Ja.ia();V.ca||(V.ba.style.display="none");J.i();D.i();v.i();K.i();t.depthFunc(t.LEQUAL);t.clearDepth(1);b.videoSettings&&b.videoSettings.videoElement?d.wb(b.videoSettings.videoElement,!1):(b.videoSettings&&d.ld(jb,b.videoSettings),d.kc(function(k){d.wb(k,!1)}));return!0}else e("INVALID_CANVASID")};window.JEEFACETRANSFERAPI=V;
;return JEEFACETRANSFERAPI;})();