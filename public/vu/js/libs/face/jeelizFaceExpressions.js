 /**
 * Jeeliz Weboji - https://github.com/jeeliz/jeelizWeboji
 *
 * Copyright 2020 WebAR.rocks ( https://webar.rocks )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

var JEELIZFACEEXPRESSIONS=(function(){function da(){this.ya=!1;this.ca=null;this.Qd=void 0;this.ba=1;this.Mc=this.he=0;this.ua=null}function fa(a){if(a.ya)throw new TypeError("Generator is already running");a.ya=!0}da.prototype.za=function(a){this.Qd=a};da.prototype.Ba=function(a){this.ua={we:a,Ue:!0};this.ba=this.he||this.Mc};da.prototype.return=function(a){this.ua={return:a};this.ba=this.Mc};function ma(a){this.o=new da;this.jf=a}
ma.prototype.za=function(a){fa(this.o);if(this.o.ca)return pa(this,this.o.ca.next,a,this.o.za);this.o.za(a);return ra(this)};function ua(a,c){fa(a.o);var e=a.o.ca;if(e)return pa(a,"return"in e?e["return"]:function(l){return{value:l,done:!0}},c,a.o.return);a.o.return(c);return ra(a)}ma.prototype.Ba=function(a){fa(this.o);if(this.o.ca)return pa(this,this.o.ca["throw"],a,this.o.za);this.o.Ba(a);return ra(this)};
function pa(a,c,e,l){try{var q=c.call(a.o.ca,e);if(!(q instanceof Object))throw new TypeError("Iterator result "+q+" is not an object");if(!q.done)return a.o.ya=!1,q;var p=q.value}catch(n){return a.o.ca=null,a.o.Ba(n),ra(a)}a.o.ca=null;l.call(a.o,p);return ra(a)}
function ra(a){for(;a.o.ba;)try{var c=a.jf(a.o);if(c)return a.o.ya=!1,{value:c.value,done:!1}}catch(e){a.o.Qd=void 0,a.o.Ba(e)}a.o.ya=!1;if(a.o.ua){c=a.o.ua;a.o.ua=null;if(c.Ue)throw c.we;return{value:c.return,done:!0}}return{value:void 0,done:!0}}function va(a){this.next=function(c){return a.za(c)};this.throw=function(c){return a.Ba(c)};this.return=function(c){return ua(a,c)};this[Symbol.iterator]=function(){return this}}
function Ba(a){function c(l){return a.next(l)}function e(l){return a.throw(l)}return new Promise(function(l,q){function p(n){n.done?l(n.value):Promise.resolve(n.value).then(c,e).then(p,q)}p(a.next())})}function Da(a){var c=new XMLHttpRequest;c.open("GET",b.tc+b.neuralNetworkPath,!0);c.withCredentials=!1;c.onreadystatechange=function(){4!==c.readyState||200!==c.status&&0!==c.status||a(c.responseText)};c.send()}
function Ea(a,c){if(0===c||"object"!==typeof a)return a;a=Object.assign({},a);c=void 0===c||-1===c?-1:c-1;for(var e in a)a[e]=Ea(a[e],c);return a}function Ia(a,c,e){return Math.min(Math.max((e-a)/(c-a),0),1)}
function Ja(a){switch(a){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}
function Ka(a,c){var e=c%8;return a[(c-e)/8]>>7-e&1}
function Oa(a){var c=JSON.parse(a);a=c.ne;var e=c.nf,l=c.n;var q="undefined"===typeof btoa?Buffer.from(c.data,"base64").toString("latin1"):atob(c.data);var p=q.length;c=new Uint8Array(p);for(var n=0;n<p;++n)c[n]=q.charCodeAt(n);q=new Float32Array(l);p=new Float32Array(e);n=a+e+1;for(var r=0;r<l;++r){for(var h=n*r,v=0===Ka(c,h)?1:-1,A=h+1,D=1,f=0,t=A+a-1;t>=A;--t)f+=D*Ka(c,t),D*=2;A=f;h=h+1+a;D=p.length;f=0;for(t=h;t<h+D;++t)p[f]=Ka(c,t),++f;for(D=h=0;D<e;++D)h+=p[D]*Math.pow(2,-D-1);q[r]=0===h&&0===
A?0:v*(1+h)*Math.pow(2,1+A-Math.pow(2,a-1))}return q}
var I=function(){function a(u,d,z){d=u.createShader(d);u.shaderSource(d,z);u.compileShader(d);return u.getShaderParameter(d,u.COMPILE_STATUS)?d:!1}function c(u,d,z){d=a(u,u.VERTEX_SHADER,d);z=a(u,u.FRAGMENT_SHADER,z);u===F&&n.push(d,z);var G=u.createProgram();u.attachShader(G,d);u.attachShader(G,z);u.linkProgram(G);return G}function e(u,d){d.B=d.B?!0:!1;if(!d.B){void 0===d.Ca&&(d.Ca="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===
d.Ga&&(d.Ga=["a0"]);void 0===d.va&&(d.va=[2]);if(void 0===d.precision||"highp"===d.precision)d.precision=D;d.id=v++;void 0!==d.Ed&&(d.Ed.forEach(function(G,N){d.h=d.h.replace(G,d.gb[N])}),d.Ed.splice(0));d.oc=0;d.va.forEach(function(G){d.oc+=4*G});d.ha=c(u,d.Ca,"precision "+d.precision+" float;\n"+d.h);d.v={};d.i.forEach(function(G){d.v[G]=u.getUniformLocation(d.ha,G)});d.attributes={};d.wa=[];d.Ga.forEach(function(G){var N=u.getAttribLocation(d.ha,G);d.attributes[G]=N;d.wa.push(N)});if(d.j){u.useProgram(d.ha);
h=d;r=d.id;for(var z in d.j)u.uniform1i(d.v[z],d.j[z])}d.ga=!0}}function l(u){Pa.Cf(P);r!==u.id&&(P.N(),r=u.id,h=u,F.useProgram(u.ha),u.wa.forEach(function(d){0!==d&&F.enableVertexAttribArray(d)}))}function q(u,d,z){e(u,d,z);u.useProgram(d.ha);u.enableVertexAttribArray(0);r=-1;return h=d}function p(){return{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],j:{u1:0}}}var n=[],r=-1,h=null,v=0,A=!1,D="highp",f=["u1"],t=["u0"],w={u1:0},k={u0:0},m={u1:0,u2:1},
J={u3:0},H={s0:p(),s1:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:f,j:w,precision:"lowp"},s2:{h:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",i:["u1","u2"],j:m},s3:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",i:f,j:w},s4:{h:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",
i:["u1","u2"],j:m},s5:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",i:f,j:w},s6:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",i:f,j:w},s7:{h:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",i:["u0","u4"],j:k},s8:{h:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 f=vec4(.25,.25,.25,.25),g=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,f);gl_FragColor=b*g;}",
i:["u0","u4"],j:k},s9:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",i:f,j:w},s10:{h:"uniform sampler2D u1,u5;uniform float u6;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);gl_FragColor=mix(b,a,u6*f);}",i:["u1","u5","u6"],j:{u1:0,u5:1}},s11:{h:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u7)+texture2D(u1,vv0+u7*vec2(1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,1.)));}",
i:["u1","u7"],j:w},s12:{h:"uniform sampler2D u1;uniform vec4 u8;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u8);gl_FragColor=j(a);}",
i:["u1","u8"],j:w},s13:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:t,j:k,B:!0},s14:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:t,j:k},s15:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:t,j:k},
s16:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",i:t,j:k},s17:{h:"uniform sampler2D u0,u6,u9;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u6,vv0),d=texture2D(u9,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",i:["u0","u6","u9"],j:{u0:0,u6:1,u9:2},B:!0},s18:{h:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",
i:t,j:k},s19:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=log(f+a);gl_FragColor=b;}",i:t,j:k,B:!0},s20:{h:"uniform sampler2D u0,u10;uniform float u11;const vec2 e=vec2(.5,.5);const float f=1e-5;const vec4 g=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u10,e);float b=u11*u11;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",i:["u0","u10","u11"],j:{u0:0,u10:1},B:!0},s21:{h:"uniform sampler2D u1;uniform vec2 u12;varying vec2 vv0;void main(){float a=u12.x*u12.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u12.y),f=floor(u12.x*fract(b*u12.y)),g=(f*u12.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",
i:["u1","u12"],j:w},s22:{h:"uniform sampler2D u13,u14,u15;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u13,b),f=texture2D(u14,c);gl_FragColor=d*f;}",i:["u13","u14","u15"],j:{u14:0,u13:1,u15:2},B:!0},s23:{h:"uniform float u16;uniform sampler2D u13,u14;varying vec2 vv0;void main(){vec2 a=fract(vv0*u16);vec4 b=texture2D(u13,vv0),c=texture2D(u14,a);gl_FragColor=b*c;}",i:["u14","u13","u16"],j:{u14:0,u13:1}},s24:{h:"uniform float u16;uniform sampler2D u13,u14,u17,u18,u19,u20;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 h=vv0*u16,l=floor(h),c=h-l;vec4 m=texture2D(u13,vv0),d=texture2D(u14,c),a=texture2D(u20,vv0);a=a*255.;vec4 n=texture2D(u17,c),o=texture2D(u18,c),p=texture2D(u19,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b;d=i*d+j*n+k*o+q*p,gl_FragColor=m*d;}",
i:"u13 u14 u16 u20 u17 u18 u19".split(" "),j:{u14:0,u13:1,u20:3,u17:4,u18:5,u19:6},B:!0},s25:{h:"uniform sampler2D u13,u14,u21;uniform float u16,u22,u23,u24;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u22*vv0),b=u22*vv0-a;float c=u16/u22;vec2 d=floor(b*c),f=b*c-d,g=(a+f)/u22;float k=u22*u24/u16;vec2 l=k*d,h=(l+f*u23)/u24,i=step(h,j);vec4 m=texture2D(u13,g),n=texture2D(u14,h),o=m*n*i.x*i.y,p=texture2D(u21,g);gl_FragColor=o*u23*u23+p;}",i:"u13 u14 u16 u22 u23 u24 u21".split(" "),
j:{u14:0,u13:1,u21:2}},s26:{h:"uniform sampler2D u13,u14;varying vec2 vv0;void main(){vec4 a=texture2D(u13,vv0),b=texture2D(u14,vv0);gl_FragColor=a*b;}",i:["u13","u14"],j:{u14:0,u13:1},B:!0},s27:{h:"uniform sampler2D u1,u21;uniform float u25;varying vec2 vv0;void main(){gl_FragColor=texture2D(u21,vv0)+u25*texture2D(u1,vv0);}",i:["u1","u21","u25"],j:{u1:0,u21:1}},s28:{h:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
i:f,j:w,precision:"lowp"},s29:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u26;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u26)).rgb,c=texture2D(u1,vv0+vec2(u26,u26)).rgb,d=texture2D(u1,vv0+vec2(u26,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",i:["u1","u26"],j:w,precision:"lowp"},s30:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u26;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u26)).rgb,c=texture2D(u1,vv0+vec2(u26,u26)).rgb,d=texture2D(u1,vv0+vec2(u26,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
i:["u1","u26"],j:w,precision:"lowp"},s31:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u27;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u27,vv0.y-u27))*1.,a-=texture2D(u1,vec2(vv0.x-u27,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u27,vv0.y+u27))*1.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y-u27))*1.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y+u27))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u27,vv0.y-u27))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u27))*2.,b-=texture2D(u1,vec2(vv0.x+u27,vv0.y-u27))*1.,b+=texture2D(u1,vec2(vv0.x-u27,vv0.y+u27))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u27))*2.,b+=texture2D(u1,vec2(vv0.x+u27,vv0.y+u27))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u27"],j:m,B:!0},s32:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u27;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u27,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u27"],j:m,B:!0},s33:{h:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u7*g;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*h),d=texture2D(u3,a+u7*i),j=texture2D(u3,a+u7),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
i:["u3","u7"],j:J},s34:{h:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*k),d=texture2D(u3,a+u7*l),g=texture2D(u3,a+u7),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u7*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u7*m),d=f(a+u7*2.),g=f(a+u7*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",i:["u3","u7"],j:J,B:!0},
s35:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",i:["u1"],j:w,precision:"lowp",B:!0},s36:{h:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u7)+2002./e*texture2D(u1,vv0-2.*u7)+3003./e*texture2D(u1,vv0-u7)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u7)+2002./e*texture2D(u1,vv0+2.*u7)+1001./e*texture2D(u1,vv0+3.*u7);gl_FragColor=a;}",i:["u7","u1"],j:w,precision:"lowp",
B:!0},s37:{h:"uniform sampler2D u1,u10,u28;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u10,vv0),b=texture2D(u28,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",i:["u1","u10","u28"],j:{u1:0,u10:1,u28:2},B:!0}},Q={s38:{h:"uniform float u16,u29;uniform sampler2D u13,u14,u21;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u21,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u16,xyTo=floor(vv0*u16+eps2);float weightSize=toSparsity*u16;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u29*(xyPatch-halfFromSparsity))/u16,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u13,uvWeight)*texture2D(u14,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u16","u13","u14","u21","u29"],gb:["1.1111","gl_FragColor\\*=2.2222;"]},s39:{h:"uniform float u16,u29,u24;uniform sampler2D u13,u14,u21;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u21,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u24,xyTo=floor(vv0*u16+eps2);float weightSize=fromSparsity*u24;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u16;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u29*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u24,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u13,uvWeight)*texture2D(u14,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u16 u24 u13 u14 u21 u29".split(" "),gb:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},y=null,K=null,P={Za:function(){return A},s:function(){if(!A){y=Ea(H,2);K=Ea(Q,2);D="highp";for(var u in y)e(F,y[u],u);I.set("s0");F.enableVertexAttribArray(0);A=!0}},wc:function(u){u.forEach(function(d){P.vc(d)})},vc:function(u){y[u.id]=u;e(F,u,u.id)},Wc:function(u,d,z){d||(d=u);y[d]=Object.create(K[u]);y[d].We=!0;K[u].gb&&K[u].gb.forEach(function(G,N){y[d].h=y[d].h.replace(new RegExp(G,"g"),z[N])});e(F,y[d],
d)},set:function(u){var d=y[u];d.B&&(d.B=!1,e(F,d,u));l(d)},Aa:function(u){return q(u,p(),"s40")},dc:function(u){return q(u,{h:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:"highp"},"s41")},xe:function(u){return"undefined"===typeof y[u]?!1:y[u].ga},N:function(){-1!==r&&(r=-1,h.wa.forEach(function(u){0!==u&&F.disableVertexAttribArray(u)}))},fc:function(){var u=0;h.wa.forEach(function(d,z){z=h.va[z];F.vertexAttribPointer(d,z,F.FLOAT,!1,h.oc,u);u+=4*z})},bg:function(){F.enableVertexAttribArray(0)},
hb:function(){P.ib(F)},ib:function(u){u.vertexAttribPointer(h.wa[0],2,u.FLOAT,!1,8,0)},Hg:function(u,d){F.uniform1i(h.v[u],d)},L:function(u,d){F.uniform1f(h.v[u],d)},ia:function(u,d,z){F.uniform2f(h.v[u],d,z)},Ig:function(u,d){F.uniform2fv(h.v[u],d)},Hd:function(u,d){F.uniform3fv(h.v[u],d)},Jg:function(u,d,z,G){F.uniform3f(h.v[u],d,z,G)},Kg:function(u,d,z,G,N){F.uniform4f(h.v[u],d,z,G,N)},ec:function(u,d){F.uniform4fv(h.v[u],d)},Lg:function(u,d){F.uniformMatrix2fv(h.v[u],!1,d)},Mg:function(u,d){F.uniformMatrix3fv(h.v[u],
!1,d)},Ng:function(u,d){F.uniformMatrix4fv(h.v[u],!1,d)},I:function(u,d){P.set(u);d.forEach(function(z){switch(z.type){case "4f":F.uniform4fv(h.v[z.name],z.value);break;case "3f":F.uniform3fv(h.v[z.name],z.value);break;case "2f":F.uniform2fv(h.v[z.name],z.value);break;case "1f":F.uniform1f(h.v[z.name],z.value);break;case "1i":F.uniform1i(h.v[z.name],z.value);break;case "mat2":F.uniformMatrix2fv(h.v[z.name],!1,z.value);break;case "mat3":F.uniformMatrix3fv(h.v[z.name],!1,z.value);break;case "mat4":F.uniformMatrix4fv(h.v[z.name],
!1,z.value)}})},mg:function(){return"lowp"},m:function(){F.disableVertexAttribArray(0);P.N();for(var u in y){var d=y[u];d.ga&&(d.ga=!1,F.deleteProgram(d.ha));d.We&&delete y[u]}n.forEach(function(z){F.deleteShader(z)});n.splice(0);v=0;A=!1;h=null;r=-1}};return P}(),F=null,Ta=function(){function a(f){console.log("ERROR in ContextFF: ",f);return!1}function c(f){function t(){Qa.m();Ra.reset();k.getExtension("WEBGL_lose_context").loseContext()}if(navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1"))return!1;
var w=document.createElement("canvas");w.setAttribute("width",5);w.setAttribute("height",5);var k=null;try{k=w.getContext("webgl2",f)}catch(m){return!1}if(!k)return!1;e(k);Ra.Ec(k);f=Ra.zb(k);if(!f.Z&&!f.$)return t(),!1;f=Qa.Bc(k,f);t();return f?!0:!1}function e(f){f.clearColor(0,0,0,0);f.disable(f.DEPTH_TEST);f.disable(f.BLEND);f.disable(f.DITHER);f.disable(f.STENCIL_TEST);f.disable(f.CULL_FACE);f.GENERATE_MIPMAP_HINT&&f.hint(f.GENERATE_MIPMAP_HINT,f.FASTEST);f.disable(f.SAMPLE_ALPHA_TO_COVERAGE);
f.disable(f.SAMPLE_COVERAGE);f.depthFunc(f.LEQUAL);f.clearDepth(1)}var l=null,q=null,p=null,n=null,r=!0,h=null,v=null,A=[],D={A:function(){return l.width},J:function(){return l.height},Pa:function(){return l},eg:function(){return F},aa:function(){return r},flush:function(){F.flush()},Ce:function(){h||(h=new Uint8Array(l.width*l.height*4));F.readPixels(0,0,l.width,l.height,F.RGBA,F.UNSIGNED_BYTE,h);return h},gg:function(){return l.toDataURL("image/jpeg")},hg:function(){Sa.M();q||(q=document.createElement("canvas"),
p=q.getContext("2d"));q.width=l.width;q.height=l.height;for(var f=D.Ce(),t=p.createImageData(q.width,q.height),w=q.width,k=q.height,m=t.data,J=0;J<k;++J)for(var H=k-J-1,Q=0;Q<w;++Q){var y=4*(J*w+Q),K=4*(H*w+Q);m[y]=f[K];m[y+1]=f[K+1];m[y+2]=f[K+2];m[y+3]=f[K+3]}p.putImageData(t,0,0);return q.toDataURL("image/png")},fg:function(f){!q&&f&&(q=document.createElement("canvas"),p=q.getContext("2d"));var t=f?q:document.createElement("canvas");t.width=l.width;t.height=l.height;(f?p:t.getContext("2d")).drawImage(l,
0,0);return t},s:function(f){f.me&&!f.yb?l=document.getElementById(f.me):f.yb&&(l=f.yb);l||(l=document.createElement("canvas"));l.width=f&&void 0!==f.width?f.width:512;l.height=f&&void 0!==f.height?f.height:512;"undefined"===typeof f&&(f={});void 0===f.premultipliedAlpha&&(f.premultipliedAlpha=!1);void 0===f.Lb&&(f.Lb=!0);void 0===f.antialias&&(f.antialias=!1);if(F)r=F instanceof WebGL2RenderingContext;else{r=!0;var t={antialias:f.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:f.premultipliedAlpha,
stencil:!1,depth:f.Lb};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&(t.antialias=!1);var w=c(t);!w&&t.antialias&&(t.antialias=!1,w=c(t));w&&(F=l.getContext("webgl2",t));F?r=!0:((F=l.getContext("webgl",t))||(F=l.getContext("experimental-webgl",t)),r=!1)}if(!F)return a("WebGL1 and 2 are not enabled");(n=F.getExtension("WEBGL_lose_context"))&&f.od&&(v=f.od,l.addEventListener("webglcontextlost",v,!1));if(!Ra.s())return a("Not enough GL capabilities");e(F);I.s();
S.s();if(!Qa.Bc(F,Ra.Ae()))return a("Cannot filter float textures");A.forEach(function(k){k(F)});A.splice(0);return!0},Uf:function(){return new Promise(function(f){F?f(F):A.push(f)})},m:function(){F&&(Ra.m(),Qa.m());n&&v&&(l.removeEventListener("webglcontextlost",v,!1),n=v=null);F=h=p=q=l=null;A.splice(0)}};return D}(),Pa=function(){function a(){null===c&&("undefined"!==typeof I?c=I:"undefined"!==typeof JEShaders&&(c=JEShaders))}var c=null;a();return{Cf:function(e){c!==e&&(c&&c.N(),c=e)},Za:function(){return c.Za()},
hb:function(){return c.hb()},ib:function(e){return c.ib(e)},fc:function(){return c.fc()},N:function(){return c.N()},set:function(e){return c.set(e)},Aa:function(e){a();return c.Aa(e)},dc:function(e){a();return c.dc(e)},m:function(){return c.m()}}}(),T=function(){function a(g){F.bindTexture(F.TEXTURE_2D,g)}function c(g){d[0]=g;g=z[0];var C=g>>16&32768,M=g>>12&2047,R=g>>23&255;return 103>R?C:142<R?C|31744|((255==R?0:1)&&g&8388607):113>R?(M|=2048,C|(M>>114-R)+(M>>113-R&1)):C=(C|R-112<<10|M>>1)+(M&1)}
function e(g){var C=new Uint16Array(g.length);g.forEach(function(M,R){C[R]=c(M)});return C}function l(){if(null!==G.Ib)return G.Ib;var g=p(e([.5,.5,.5,.5]));return null===g?!0:G.Ib=g}function q(){if(null!==G.Jb)return G.Jb;var g=p(new Uint8Array([127,127,127,127]));return null===g?!0:G.Jb=g}function p(g){if(!Pa.Za()||!k)return null;var C=null,M=Math.sqrt(g.length/4);try{var R=F.getError();if("FUCKING_BIG_ERROR"===R)return!1;C=N.instance({isFloat:!1,G:!0,array:g,width:M});R=F.getError();if(R!==F.NO_ERROR)return!1}catch(ca){return!1}Sa.M();
F.viewport(0,0,M,M);F.clearColor(0,0,0,0);F.clear(F.COLOR_BUFFER_BIT);Pa.set("s0");C.zc(0);S.l(!0,!0);g=4*M*M;R=new Uint8Array(g);F.readPixels(0,0,M,M,F.RGBA,F.UNSIGNED_BYTE,R);M=!0;for(var ba=0;ba<g;++ba)M=M&&3>Math.abs(R[ba]-127);C.remove();Sa.Y();return M}var n=0,r=null,h=0,v=null,A=null,D=null,f=null,t=null,w=null,k=!1,m=[],J={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,
data:null,C:null,Sc:null,Ve:!1,G:!1,fa:null,bb:4,Sb:0},H=!1,Q=null,y=null,K=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],P=!1,u=!1,d=new Float32Array(1),z=new Int32Array(d.buffer),G={Ib:null,Jb:null},N={s:function(){k||(t=[F.RGBA,null,F.RGBA,F.RGBA],w=[F.RGBA,null,F.RGBA,F.RGBA],r=[F.TEXTURE0,F.TEXTURE1,F.TEXTURE2,F.TEXTURE3,F.TEXTURE4,F.TEXTURE5,F.TEXTURE6,F.TEXTURE7],P="undefined"!==typeof JEContext,u="undefined"!==typeof Ra,P&&JEContext.Ag()&&r.push(F.TEXTURE8,F.TEXTURE9),v=[-1,-1,-1,-1,-1,-1,-1,
-1],f=[F.UNSIGNED_BYTE,F.FLOAT,F.FLOAT],k=!0)},Pe:function(){if(!A){for(var g=new Float32Array(16384),C=0;16384>C;++C)g[C]=2*Math.random()-1;A={random:N.instance({isFloat:!0,isPot:!0,array:g,width:64}),Nd:N.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}N.Mf()},sg:function(){return A.Nd},Mf:function(){f[1]=Ra.Db(F)},Af:function(){w=t=[F.RGBA,F.RGBA,F.RGBA,F.RGBA]},yd:function(g){I.set("s1");Sa.M();var C=g.A(),M=g.J();F.viewport(0,0,C,M);g.g(0);S.l(!1,!1)},rf:function(g,C){N.yd(g);
F.readPixels(0,0,g.A(),g.J(),F.RGBA,F.UNSIGNED_BYTE,C)},sf:function(g,C){N.yd(g);return Ra.cc(0,0,g.A(),g.J(),C)},Lc:function(g,C,M,R,ba,ca,Y){g.activeTexture(g.TEXTURE0);var x=g.createTexture();g.bindTexture(g.TEXTURE_2D,x);ba=ba instanceof Float32Array?ba:new Float32Array(ba);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,
g.NEAREST);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,ca);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,M,R,0,g.RGBA,g.FLOAT,ba);g.bindTexture(g.TEXTURE_2D,null);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,!1);Y&&(Sa.Y(),I.Aa(g));g.viewport(0,0,M,R);g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,C,0);g.bindTexture(g.TEXTURE_2D,x);Y?S.l(!0,!0):S.Na(g);g.deleteTexture(x);k&&(v[0]=-1,D=null,n=0)},tb:function(g){g!==n&&(F.activeTexture(r[g]),n=g)},instance:function(g){function C(){U=void 0!==x.C.videoWidth?
x.C.videoWidth:x.C.width;W=void 0!==x.C.videoHeight?x.C.videoHeight:x.C.height}function M(E){var V=F.getError();if("FUCKING_BIG_ERROR"===V)return!1;F.texImage2D(F.TEXTURE_2D,0,ka,ha,ia,E);V=F.getError();V!==F.NO_ERROR&&ha!==F.RGBA&&(ha=F.RGBA,F.texImage2D(F.TEXTURE_2D,0,ka,ha,ia,E));return!0}function R(){if(!Ya){a(na);sa&&F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,sa);x.isPot?(F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_S,x.isMirrorX?F.MIRRORED_REPEAT:F.REPEAT),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_T,
x.isMirrorY?F.MIRRORED_REPEAT:F.REPEAT)):(F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_S,F.CLAMP_TO_EDGE),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_T,F.CLAMP_TO_EDGE));x.isAnisotropicFiltering&&"undefined"!==typeof JESETTINGS&&F.texParameterf(F.TEXTURE_2D,JEContext.jg().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.Qf);F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MAG_FILTER,x.isLinear?F.LINEAR:F.NEAREST);x.isLinear?F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MIN_FILTER,x.isMipmap&&!za?F.NEAREST_MIPMAP_LINEAR:F.LINEAR):
F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MIN_FILTER,x.isMipmap&&!za?F.NEAREST_MIPMAP_NEAREST:F.NEAREST);ha=t[x.bb-1];ka=w[x.bb-1];ia=f[B];if(Ra.aa()){var E=Ra.De();ha===F.RGBA&&ia===F.FLOAT?x.isMipmap||x.isLinear?ka=Qa.Fe(F):Ra.Cc()?E&&(ka=E):ka=F.RGBA16F||F.RGBA:ha===F.RGB&&ia===F.FLOAT&&E&&(ka=E,ha=F.RGBA)}if(x.G&&!x.isFloat||x.isFloat&&x.isMipmap&&Qa.Ze())ka=Ra.Ee(),ia=Ra.Db(F);x.Sb&&(La=x.Sb);x.isSrgb&&4===x.bb&&(ha=JEContext.qg());if(x.C)M(x.C);else if(x.url)M(ya);else if(oa){E=oa;try{"FUCKING_BIG_ERROR"!==
F.getError()&&(F.texImage2D(F.TEXTURE_2D,0,ka,U,W,0,ha,ia,E),F.getError()!==F.NO_ERROR&&(F.texImage2D(F.TEXTURE_2D,0,ka,U,W,0,ha,ia,null),F.getError()!==F.NO_ERROR&&F.texImage2D(F.TEXTURE_2D,0,F.RGBA,U,W,0,F.RGBA,F.UNSIGNED_BYTE,null)))}catch(Hb){F.texImage2D(F.TEXTURE_2D,0,ka,U,W,0,ha,ia,null)}x.isKeepArray||(oa=null)}else E=F.getError(),"FUCKING_BIG_ERROR"!==E&&(F.texImage2D(F.TEXTURE_2D,0,ka,U,W,0,ha,ia,null),E=F.getError(),E!==F.NO_ERROR&&(ha=F.RGBA,x.G&&ia!==F.FLOAT&&(ia=F.FLOAT,F.texImage2D(F.TEXTURE_2D,
0,ka,U,W,0,ha,ia,null))));if(x.isMipmap)if(!za&&ea)ea.Cb(),Ma=!0;else if(za){E=Math.log2(Math.min(U,W));Ca=Array(1+E);Ca[0]=na;for(var V=1;V<=E;++V){var la=Math.pow(2,V),Z=U/la;la=W/la;var Aa=F.createTexture();a(Aa);F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MIN_FILTER,F.NEAREST);F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MAG_FILTER,F.NEAREST);F.texImage2D(F.TEXTURE_2D,0,ka,Z,la,0,ha,ia,null);a(null);Ca[V]=Aa}Ma=!0}a(null);v[n]=-1;sa&&F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,!1);Fa=!0;x.fa&&ea&&(x.fa(ea),x.fa=
null)}}function ba(){for(var E=U*W,V=2*E,la=3*E,Z=0;Z<E;++Z)qa[0][Z]=Ga[Z],qa[1][Z]=Ga[Z+E],qa[2][Z]=Ga[Z+V],qa[3][Z]=Ga[Z+la]}function ca(){var E=U*W*4;wa=[new Uint8Array(E),new Uint8Array(E),new Uint8Array(E),new Uint8Array(E)];qa=[new Float32Array(wa[0].buffer),new Float32Array(wa[1].buffer),new Float32Array(wa[2].buffer),new Float32Array(wa[3].buffer)];Na=new Uint8Array(4*E);Ga=new Float32Array(Na.buffer);Ha=!0}function Y(){xa.vb=new Uint8Array(U*W*4);xa.Nc=new Float32Array(xa.buffer);xa.U=!0}
var x=Object.assign({},J,g),ja=h++;null===x.isFlipY&&(x.isFlipY=x.url||x.array?!0:!1);x.data&&(x.array="string"===typeof x.data?Oa(x.data):x.isFloat?new Float32Array(x.data):new Uint8Array(x.data),x.isFlipY=!1);var B=0,L=x.C?!0:!1,aa=null,O=null,ta=!1,Ua=null;x.G=x.G||x.isFloat;x.G&&(B=1);!x.Ve&&x.isFloat&&u&&!Ra.Cc()&&(x.isFloat=!1);x.isFloat&&(B=2);x.isAnisotropicFiltering&&P&&!JEContext.vg()&&(x.isAnisotropicFiltering=!1);var na=x.Sc||F.createTexture(),ya=null,oa=!1,U=0,W=0,Fa=!1,Ya=!1,Ha=!1,qa=
null,wa=null,Na=null,Ga=null,ka=null,ha=null,ia=null,sa=x.isFlipY,qb=(g=x.G&&x.isMipmap)&&Qa.de(),za=g&&qb?!0:!1,Ca=null,La=-1,Ma=!1,xa={U:!1,vb:null,Nc:null};x.width&&(U=x.width,W=x.height?x.height:U);var ea={get:function(){return na},A:function(){return U},J:function(){return W},tg:function(){return x.url},wg:function(){return x.isFloat},yg:function(){return x.G},zg:function(){return x.isLinear},Cb:function(){F.generateMipmap(F.TEXTURE_2D)},be:function(E,V){za?(E||(E=ea.Qc()),N.tb(V),a(Ca[E]),v[V]=
-1):ea.g(V)},Qc:function(){-1===La&&(La=Math.log(U)/Math.log(2));return La},ze:function(E){if(za){E||(E=ea.Qc());I.set("s11");N.tb(0);for(var V=U,la=W,Z=1;Z<=E;++Z)V/=2,la/=2,I.ia("u7",.25/V,.25/la),F.viewport(0,0,V,la),a(Ca[Z-1]),F.framebufferTexture2D(Sa.Ra(),F.COLOR_ATTACHMENT0,F.TEXTURE_2D,Ca[Z],0),S.l(!1,1===Z);v[0]=-1}else ea.Cb()},Gg:function(E){(L=!(Array.isArray(E)||E.constructor===Float32Array||E.constructor===Uint8Array))?(oa=null,x.C=E,C()):oa=E},g:function(E){if(!Fa)return!1;N.tb(E);
if(v[E]===ja)return!1;a(na);v[E]=ja;return!0},zc:function(E){F.activeTexture(r[E]);n=E;a(na);v[E]=ja},u:function(){D=ea;F.framebufferTexture2D(Sa.Ra(),F.COLOR_ATTACHMENT0,F.TEXTURE_2D,na,0)},R:function(){D=ea;F.viewport(0,0,U,W);F.framebufferTexture2D(Sa.Ra(),F.COLOR_ATTACHMENT0,F.TEXTURE_2D,na,0)},nc:N.nc,resize:function(E,V){U=E;W=V;R()},clone:function(E){E=N.instance({width:U,height:W,G:x.G,isFloat:x.isFloat,isLinear:x.isLinear,isMirrorY:x.isMirrorY,isFlipY:E?!sa:sa,isPot:x.isPot});Pa.set("s0");
Sa.Y();E.u();F.viewport(0,0,U,W);ea.g(0);S.l(!0,!0);return E},Df:function(){F.viewport(0,0,U,W)},remove:function(){F.deleteTexture(na);Ya=!0;m.splice(m.indexOf(ea),1);ea=null},refresh:function(){ea.zc(0);sa&&F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,!0);L?F.texImage2D(F.TEXTURE_2D,0,ka,ha,ia,x.C):F.texImage2D(F.TEXTURE_2D,0,ka,U,W,0,ha,ia,oa);sa&&F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,!1)},bc:function(){Ha||ca();F.readPixels(0,0,U,4*W,F.RGBA,F.UNSIGNED_BYTE,Na);ba();return qa},mf:function(){Ha||ca();return Ra.cc(0,
0,U,4*W,Na).then(function(){ba();return qa})},qf:function(){xa.U||Y();F.readPixels(0,0,U,W,F.RGBA,F.UNSIGNED_BYTE,xa.vb);return xa.Nc},pf:function(){xa.U||Y();return Ra.cc(0,0,U,W,xa.vb)},Ab:function(E){Sa.M();I.set("s12");ea.g(0);if(E)F.viewport(0,0,U,W),I.ec("u8",.25,.25,.25,.25),S.l(!1,!0);else for(E=0;4>E;++E)F.viewport(0,W*E,U,W),I.ec("u8",K[E]),S.l(!1,0===E)},Qg:function(E){var V=ia===f[0]&&!q();a(na);sa&&F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,!0);V?(ta||(aa=document.createElement("canvas"),aa.width=
U,aa.height=W,O=aa.getContext("2d"),Ua=O.createImageData(U,W),ta=!0),Ua.data.set(E),O.putImageData(Ua,0,0),F.texImage2D(F.TEXTURE_2D,0,ka,ha,ia,aa)):F.texImage2D(F.TEXTURE_2D,0,ka,U,W,0,ha,ia,E);v[n]=ja;sa&&F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,!1)},Rg:function(E,V){a(na);V&&F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,!0);F.texImage2D(F.TEXTURE_2D,0,ka,ha,ia,E);v[n]=ja;V&&F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,!1)},Eg:function(E,V){var la=U*W,Z=4*la;E=x.G?E?"RGBE":"JSON":"RGBA";V&&(E=V);V=Ra.aa()&&!1;var Aa=null;
switch(E){case "RGBE":Aa="s42";break;case "JSON":Aa=V?"s0":"s12";break;case "RGBA":case "RGBAARRAY":Aa="s6"}Ha||("RGBA"===E||"RGBE"===E||"RGBAARRAY"===E?(wa=new Uint8Array(Z),Ha=!0):"JSON"!==E||V||ca());Sa.M();I.set(Aa);ea.g(0);Z=null;if("RGBA"===E||"RGBE"===E||"RGBAARRAY"===E){F.viewport(0,0,U,W);S.l(!0,!0);F.readPixels(0,0,U,W,F.RGBA,F.UNSIGNED_BYTE,wa);if("RGBAARRAY"===E)return{data:wa};H||(Q=document.createElement("canvas"),y=Q.getContext("2d"),H=!0);Q.width=U;Q.height=W;la=y.createImageData(U,
W);la.data.set(wa);y.putImageData(la,0,0);Z=Q.toDataURL("image/png")}else if("JSON"===E)if(V)Z=new Float32Array(la),F.viewport(0,0,U,W),S.l(!0,!0),F.readPixels(0,0,U,W,F.RGBA,F.FLOAT,Z);else{for(Z=0;4>Z;++Z)F.viewport(0,W*Z,U,W),I.ec("u8",K[Z]),S.l(!Z,!Z);ea.bc();Z=Array(la);for(V=0;V<la;++V)Z[4*V]=qa[0][V],Z[4*V+1]=qa[1][V],Z[4*V+2]=qa[2][V],Z[4*V+3]=qa[3][V]}return{format:E,data:Z,width:U,height:W,isMirrorY:x.isMirrorY,isFlipY:"RGBA"===E?x.isFlipY:!x.isFlipY}}};x.isMipmap&&!za&&Fa&&!Ma&&(ea.Cb(),
Ma=!0);if(x.url)a(na),F.texImage2D(F.TEXTURE_2D,0,F.RGBA,1,1,0,F.RGBA,F.UNSIGNED_BYTE,null),ya=new Image,ya.Zf="Anonymous",ya.crossOrigin="Anonymous",ya.src=x.url,ya.onload=function(){U=ya.width;W=ya.height;R()};else if(x.C){var Za=function(){C();U?R():setTimeout(Za,1)};Za()}else x.array?(x.G&&!x.isFloat?x.array instanceof Uint16Array?(oa=x.array,R()):l()?(oa=e(x.array),R()):(R(),N.Lc(F,na,ea.A(),ea.J(),x.array,sa,!0)):(oa=x.isFloat?x.array instanceof Float32Array?x.array:new Float32Array(x.array):
x.array instanceof Uint8Array?x.array:new Uint8Array(x.array),R()),x.isKeepArray||(oa&&oa!==x.array&&(oa=null),delete x.array)):x.Sc?Fa=!0:R();ea.pg=ea.A;x.fa&&Fa&&(x.fa(ea),x.fa=null);m.push(ea);return ea},M:function(g){g!==n&&(F.activeTexture(r[g]),n=g);v[g]=-1;a(null)},Tf:function(g){A.random.g(g)},nc:function(){D=null;F.framebufferTexture2D(Sa.Ra(),F.COLOR_ATTACHMENT0,F.TEXTURE_2D,null,0)},reset:function(){0!==n&&F.activeTexture(r[0]);for(var g=0;g<r.length;++g)v[g]=-1;n=-1},Dg:function(){n=-1},
If:function(){for(var g=0;g<r.length;++g)N.M(g)},Oc:function(){A&&(A.random.remove(),A.Nd.remove())},Pg:function(g,C){if("RGBA"===g.format||"RGBE"===g.format){var M=new Image;M.src=g.data;M.onload=function(){N.instance({isMirrorY:g.isMirrorY,isFlipY:g.isFlipY,isFloat:!1,C:M,fa:function(R){if("RGBA"===g.format)C(R);else{var ba=g.width,ca=g.height,Y=N.instance({isMirrorY:g.isMirrorY,isFloat:!0,width:ba,height:ca,isFlipY:g.isFlipY});Sa.Y();F.viewport(0,0,ba,ca);I.set("s43");Y.u();R.g(0);S.l(!0,!0);N.M(0);
C(Y);F.flush();setTimeout(R.remove,50)}}})}}else"JSON"===g.format?C(N.instance({isFloat:!0,isFlipY:g.isFlipY,width:g.width,height:g.height,array:new Float32Array(g.data)})):C(!1)},ie:e,m:function(){D&&(Sa.Y(),N.nc(),Sa.M());N.If();m.slice(0).forEach(function(g){g.remove()});m.splice(0);k=!1;h=0;"undefined"!==typeof Qa&&Qa.m();A=null}};return N}(),Va={instance:function(a){var c=[T.instance(a),T.instance(a)],e=[c[1],c[0]],l=e,q={Gd:function(p){l[1].u();l[0].g(p);q.Kd()},Fg:function(p){l[1].R();l[0].g(p);
q.Kd()},Kd:function(){l=l===c?e:c},refresh:function(){l[0].refresh();l[1].refresh()},g:function(p){l[0].g(p)},Sf:function(p){l[1].g(p)},Ie:function(){return l[0]},ng:function(){return l[1]},remove:function(){l[0].remove();l[1].remove();l=null}};return q}},S=function(){function a(h){var v={X:null,F:null};v.X=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,v.X);h.bufferData(h.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),h.STATIC_DRAW);v.F=h.createBuffer();h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,v.F);h.bufferData(h.ELEMENT_ARRAY_BUFFER,
new Uint16Array([0,1,2]),h.STATIC_DRAW);return v}var c=null,e=0,l=!1,q=[],p=-2,n=-2,r={reset:function(){n=p=-2},s:function(){l||(c=a(F),r.ub(),l=!0)},instance:function(h){var v=e++,A=h.F?h.F.length:0,D="undefined"===typeof h.mode?F.STATIC_DRAW:h.mode,f=F.createBuffer();F.bindBuffer(F.ARRAY_BUFFER,f);F.bufferData(F.ARRAY_BUFFER,h.X instanceof Float32Array?h.X:new Float32Array(h.X),D);p=v;var t=null,w=null,k=null;if(h.F){t=F.createBuffer();F.bindBuffer(F.ELEMENT_ARRAY_BUFFER,t);var m=null;65536>h.F.length?
(m=Uint16Array,w=F.UNSIGNED_SHORT,k=2):(m=Uint32Array,w=F.UNSIGNED_INT,k=4);m=h.F instanceof m?h.F:new m(h.F);F.bufferData(F.ELEMENT_ARRAY_BUFFER,m,D);n=v}var J={ce:function(H){p!==v&&(F.bindBuffer(F.ARRAY_BUFFER,f),p=v);H&&Pa.fc()},$d:function(){n!==v&&(F.bindBuffer(F.ELEMENT_ARRAY_BUFFER,t),n=v)},bind:function(H){J.ce(H);J.$d()},$f:function(){F.drawElements(F.TRIANGLES,A,w,0)},ag:function(H,Q){F.drawElements(F.TRIANGLES,H,w,Q*k)},remove:function(){F.deleteBuffer(f);h.F&&F.deleteBuffer(t);J=null}};
q.push(J);return J},ub:function(){-1!==p&&(F.bindBuffer(F.ARRAY_BUFFER,c.X),p=-1);-1!==n&&(F.bindBuffer(F.ELEMENT_ARRAY_BUFFER,c.F),n=-1)},l:function(h,v){h&&S.ub();v&&Pa.hb();F.drawElements(F.TRIANGLES,3,F.UNSIGNED_SHORT,0)},Na:function(h){h=h||F;var v=a(h);h.bindBuffer(h.ARRAY_BUFFER,v.X);h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,v.F);Pa.ib(h);h.clear(h.COLOR_BUFFER_BIT);h.drawElements(h.TRIANGLES,3,h.UNSIGNED_SHORT,0);h.flush();h.bindBuffer(h.ARRAY_BUFFER,null);h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,null);
h.deleteBuffer(v.X);h.deleteBuffer(v.F);r.reset();l&&(r.ub(),Pa.hb())},Oc:function(){var h=F,v=c;h.deleteBuffer(v.X);h.deleteBuffer(v.F)},m:function(){r.Oc();q.forEach(function(h){h.remove()});F.bindBuffer(F.ARRAY_BUFFER,null);F.bindBuffer(F.ELEMENT_ARRAY_BUFFER,null);r.reset();l=!1;q.splice(0);e=0}};return r}(),Sa=function(){var a=null,c=null,e=null,l=!1,q=[],p={D:-2,Kc:1},n={Za:function(){return l},s:function(){if(!l){a=F.createFramebuffer();var r=Ra.aa();c=r&&F.DRAW_FRAMEBUFFER?F.DRAW_FRAMEBUFFER:
F.FRAMEBUFFER;e=r&&F.READ_FRAMEBUFFER?F.READ_FRAMEBUFFER:F.FRAMEBUFFER;l=!0}},kg:function(){return c},Ge:function(){return e},Ra:function(){return F.FRAMEBUFFER},og:function(){return p},dg:function(){return a},instance:function(r){void 0===r.$c&&(r.$c=!1);var h=r.ra?r.ra:null,v=r.width,A=void 0!==r.height?r.height:r.width,D=a,f=null,t=!1,w=!1,k=0;h&&(v=v?v:h.A(),A=A?A:h.J());var m={Fd:function(){t||(D=F.createFramebuffer(),t=!0,k=p.Kc++)},Vd:function(){m.Fd();m.u();f=F.createRenderbuffer();F.bindRenderbuffer(F.RENDERBUFFER,
f);F.renderbufferStorage(F.RENDERBUFFER,F.DEPTH_COMPONENT16,v,A);F.framebufferRenderbuffer(c,F.DEPTH_ATTACHMENT,F.RENDERBUFFER,f);F.clearDepth(1)},bind:function(J,H){k!==p.D&&(F.bindFramebuffer(c,D),p.D=k);h&&h.u();H&&F.viewport(0,0,v,A);J&&F.clear(F.COLOR_BUFFER_BIT|F.DEPTH_BUFFER_BIT)},Rf:function(){k!==p.D&&(F.bindFramebuffer(c,D),p.D=k)},clear:function(){F.clear(F.COLOR_BUFFER_BIT|F.DEPTH_BUFFER_BIT)},Xf:function(){F.clear(F.COLOR_BUFFER_BIT)},Yf:function(){F.clear(F.DEPTH_BUFFER_BIT)},Df:function(){F.viewport(0,
0,v,A)},u:function(){k!==p.D&&(F.bindFramebuffer(c,D),p.D=k)},rtt:function(J){h=J;p.D!==k&&(F.bindFramebuffer(F.FRAMEBUFFER,D),p.D=k);J.u()},M:function(){F.bindFramebuffer(c,null);p.D=-1},resize:function(J,H){v=J;A=H;f&&(F.bindRenderbuffer(F.RENDERBUFFER,f),F.renderbufferStorage(F.RENDERBUFFER,F.DEPTH_COMPONENT16,v,A))},remove:function(){D===a||w||(F.bindFramebuffer(c,D),F.framebufferTexture2D(c,F.COLOR_ATTACHMENT0,F.TEXTURE_2D,null,0),f&&F.framebufferRenderbuffer(c,F.DEPTH_ATTACHMENT,F.RENDERBUFFER,
null),F.bindFramebuffer(c,null),F.deleteFramebuffer(D),f&&F.deleteRenderbuffer(f));w=!0}};r.$c&&m.Vd();q.push(m);return m},M:function(){F.bindFramebuffer(c,null);p.D=-1},Jf:function(){F.bindFramebuffer(c,null);F.clear(F.COLOR_BUFFER_BIT|F.DEPTH_BUFFER_BIT);F.viewport(0,0,Ra.A(),Ra.J());p.D=-1},reset:function(){p.D=-2},Y:function(){0!==p.D&&(F.bindFramebuffer(c,a),p.D=0)},clear:function(){F.viewport(0,0,Ra.A(),Ra.J());F.clear(F.COLOR_BUFFER_BIT)},m:function(){n.M();q.forEach(function(r){r.remove()});
null!==a&&(F.deleteFramebuffer(a),a=null);n.reset();l=!1;q.splice(0);p.Kc=1}};return n}(),Ra=function(){function a(){l="undefined"===typeof Ta?JEContext:Ta;q=!0}function c(k,m){for(var J=0;J<k.length;++J){var H=m.getExtension(k[J]);if(H)return H}return null}function e(){null!==f.mb&&(clearInterval(f.mb),f.mb=null);f.xa=!1}var l=null,q=!1,p={ad:!1,ic:null,jc:null,dd:!1,Ye:!1,kc:null,ed:!1,lc:null,bd:!1,wb:null,Se:!1,xb:null,Te:!1},n=null,r={Z:!0,$:!0,Bb:!0,xd:!1},h=null,v=!0,A=null,D=null,f={xa:!1,
ma:null,Va:null,Gb:-1,S:null,mb:null},t="undefined"===typeof window?{}:window,w={s:function(){if(q)return!0;w.reset();q||a();var k=F;if(!n.ad){n.ic=w.Hc(k);t.GL_EXT_FLOAT=n.ic;n.dd=n.ic?!0:!1;if(n.dd||w.aa())n.jc=w.Ic(k),n.Ye=n.jc?!0:!1,t.GL_EXT_FLOATLINEAR=n.jc;n.ad=!0}if(!n.bd){n.kc=w.La(k);n.kc&&(n.ed=!0,t.GL_EXT_HALFFLOAT=n.kc);if(n.ed||w.aa())n.lc=w.Jc(k),t.GL_EXT_HALFFLOATLINEAR=n.lc;n.ug=n.lc?!0:!1;n.bd=!0}n.wb=w.Fc(k);n.Se=n.wb?!0:!1;t.GL_EXT_COLORBUFFERFLOAT=n.wb;n.xb=w.Gc(k);n.Te=n.xb?!0:
!1;t.GL_EXT_COLORBUFFERHALFFLOAT=n.xb;Sa.s();T.s();if(!w.pe())return!1;S.s();T.Pe();return!0},reset:function(){n=Object.assign({},p);h=Object.assign({},r)},A:function(){q||a();return l.A()},J:function(){q||a();return l.J()},aa:function(){q||a();return l.aa()},Ec:function(k){w.Fc(k);w.Gc(k);w.Hc(k);w.Ic(k);w.La(k);w.Jc(k)},Fc:c.bind(null,["EXT_color_buffer_float","WEBGL_color_buffer_float","OES_color_buffer_float"]),Gc:c.bind(null,["EXT_color_buffer_half_float","WEBGL_color_buffer_half_float","OES_color_buffer_half_float"]),
Hc:c.bind(null,["OES_texture_float","MOZ_OES_texture_float","WEBKIT_OES_texture_float"]),Ic:c.bind(null,["OES_texture_float_linear","MOZ_OES_texture_float_linear","WEBKIT_OES_texture_float_linear"]),La:c.bind(null,["OES_texture_half_float","MOZ_OES_texture_half_float","WEBKIT_OES_texture_half_float"]),Jc:c.bind(null,["OES_texture_half_float_linear","MOZ_OES_texture_half_float_linear","WEBKIT_OES_texture_half_float_linear"]),Db:function(k){var m=w.La(k);return m&&m.HALF_FLOAT_OES?m.HALF_FLOAT_OES:
k.HALF_FLOAT||k.FLOAT},De:function(){return D||F.RGBA32F||F.RGBA},Ee:function(){return A||F.RGBA16F||F.RGBA},Ae:function(){return h},Cc:function(){return h.Z},Wf:function(){return h.$},Vf:function(){return h.Bb},ee:function(){return h.xd&&v},Md:function(k){v=k;!k&&f.xa&&(F.deleteSync(f.Va),F.bindBuffer(f.S,null),f.xa=!1)},kb:function(k,m,J){function H(){k.bindTexture(k.TEXTURE_2D,null);k.bindFramebuffer(Q,null);k.deleteTexture(P);k.deleteFramebuffer(K)}var Q=k.FRAMEBUFFER,y=k.NEAREST,K=k.createFramebuffer();
k.bindFramebuffer(Q,K);var P=k.createTexture();k.activeTexture(k.TEXTURE0);k.bindTexture(k.TEXTURE_2D,P);k.pixelStorei(k.UNPACK_FLIP_Y_WEBGL,!1);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.CLAMP_TO_EDGE);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,k.CLAMP_TO_EDGE);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,y);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,y);k.texImage2D(k.TEXTURE_2D,0,m,3,3,0,k.RGBA,J,null);k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,P,0);
if(k.checkFramebufferStatus(k.READ_FRAMEBUFFER||k.FRAMEBUFFER)!==k.FRAMEBUFFER_COMPLETE)return H(),!1;Pa.dc(k);k.clearColor(0,0,0,0);k.viewport(0,0,3,3);k.disable(k.DEPTH_TEST);k.clear(k.COLOR_BUFFER_BIT);S.Na(k);k.bindFramebuffer(Q,null);Pa.Aa(k);k.activeTexture(k.TEXTURE0);k.bindTexture(k.TEXTURE_2D,P);S.Na(k);m=new Uint8Array(36);k.readPixels(0,0,3,3,k.RGBA,k.UNSIGNED_BYTE,m);H();for(J=0;36>J;++J)if(3!==J%4&&3<Math.abs(m[J]-127))return!1;return!0},zb:function(k){var m={Z:!1,$:!1};k.disable(k.BLEND);
k.clearColor(0,0,0,0);k.clear(k.COLOR_BUFFER_BIT);k.RGBA32F&&w.kb(k,k.RGBA32F,k.FLOAT)&&(m.Z=!0,D=k.RGBA32F);!m.Z&&w.kb(k,k.RGBA,k.FLOAT)&&(m.Z=!0,D=k.RGBA);var J=w.Db(k);A=null;k.RGBA16F&&w.kb(k,k.RGBA16F,J)&&(m.$=!0,A=k.RGBA16F);!m.$&&w.kb(k,k.RGBA,J)&&(m.$=!0,A=k.RGBA);return m},qe:function(){var k=Sa.instance({width:2});k.Fd();var m=T.instance({width:2,isFloat:!0,bb:3});k.u();m.u();F.flush();F.checkFramebufferStatus(Sa.Ge())!==F.FRAMEBUFFER_COMPLETE?(T.Af(),h.Bb=!1):h.Bb=!0;k.remove();m.remove()},
re:function(){var k=!1;w.aa()&&(k="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(m){return"undefined"!==typeof F[m]}));h.xd=k},pe:function(){var k=w.zb(F);Object.assign(h,k);if(!h.Z&&!h.$)return!1;w.qe();w.re();return!0},cc:function(k,m,J,H,Q){if(!w.ee())return F.readPixels(k,m,J,H,F.RGBA,F.UNSIGNED_BYTE,Q),Promise.resolve(Q);null===f.ma&&(f.S=F.PIXEL_PACK_BUFFER,f.ma=F.createBuffer(),f.Gb=-1);F.bindBuffer(f.S,f.ma);
Q.byteLength!==f.Gb&&(F.bufferData(f.S,Q.byteLength,F.STREAM_READ),f.Gb=Q.byteLength);F.readPixels(k,m,J,H,F.RGBA,F.UNSIGNED_BYTE,0);f.Va=F.fenceSync(F.SYNC_GPU_COMMANDS_COMPLETE,0);F.flush();return new Promise(function(y,K){function P(){if(!f.xa)return e(),K(),!1;switch(F.clientWaitSync(f.Va,0,0)){case F.TIMEOUT_EXPIRED:case F.WAIT_FAILED:return!1;default:return e(),F.deleteSync(f.Va),F.getBufferSubData(f.S,0,Q),F.bindBuffer(f.S,null),y(Q),!0}}e();f.xa=!0;P()||(f.mb=setInterval(P,0))})},m:function(){e();
T.m();Pa.m();Sa.m();S.m();null!==f.ma&&(F.deleteBuffer(f.ma),f.ma=null);q=!1}};return w}(),Qa=function(){function a(K,P,u,d){m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,d?m.NEAREST_MIPMAP_NEAREST:m.LINEAR);var z=null;if(null!==u)try{z=m.getError();if("FUCKING_BIG_ERROR"===z)return!1;m.texImage2D(m.TEXTURE_2D,0,K,4,4,0,m.RGBA,P,u);z=m.getError();if(z!==m.NO_ERROR)return!1}catch(G){return!1}d&&m.generateMipmap(m.TEXTURE_2D);m.clear(m.COLOR_BUFFER_BIT);S.Na(m);z=m.getError();if("FUCKING_BIG_ERROR"===
z)return!1;m.readPixels(0,0,2,2,m.RGBA,m.UNSIGNED_BYTE,A);z=m.getError();z===m.INVALID_OPERATION&&"undefined"!==typeof m.PIXEL_PACK_BUFFER&&(m.bindBuffer(m.PIXEL_PACK_BUFFER,null),m.readPixels(0,0,2,2,m.RGBA,m.UNSIGNED_BYTE,A),z=m.getError());if(z!==m.NO_ERROR)return!1;u=!0;for(d=0;16>d;++d)u=u&&4>Math.abs(A[d]-127);u&&(h.qd=P,h.Zc=K);return u}function c(K,P){return J.Z&&a(K,m.FLOAT,new Float32Array(D),P)?(r=n.uc,!0):!1}function e(K,P,u){if(!J.$)return!1;var d=T.ie(D),z=Ra.La(m);if(z&&z.HALF_FLOAT_OES&&
a(K,z.HALF_FLOAT_OES,d,P)||m.HALF_FLOAT&&a(K,m.HALF_FLOAT,d,P))return r=n.ta,!0;d=new Float32Array(D);if(a(K,m.FLOAT,d,P))return r=n.ta,!0;m.bindTexture(m.TEXTURE_2D,u);m.texImage2D(m.TEXTURE_2D,0,m.RGBA,2,2,0,m.RGBA,m.UNSIGNED_BYTE,null);m.bindFramebuffer(h.Ja,y);T.Lc(m,u,2,2,d,!1,!1);m.bindFramebuffer(h.Ja,null);m.bindTexture(m.TEXTURE_2D,u);return a(K,null,null,P)?(r=n.ta,!0):!1}function l(K,P,u){v=!0;if(e(K,!0,u)||c(P,!0))return!0;v=!1;return e(K,!1,u)||c(P,!1)?!0:!1}function q(K){if(r===n.N){m=
K||F;r=n.RGBA8;v=!0;Ra.Ec(m);J||(J=Ra.zb(m));Sa.reset();y=m.createFramebuffer();h.Ja=m.DRAW_FRAMEBUFFER||m.FRAMEBUFFER;m.bindFramebuffer(h.Ja,null);m.clearColor(0,0,0,0);m.viewport(0,0,2,2);I.N();H=I.Aa(m);K=m.createTexture();m.activeTexture(m.TEXTURE0);m.bindTexture(m.TEXTURE_2D,K);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.REPEAT);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.REPEAT);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.NEAREST);Q=K;var P=K=m.RGBA,u=m.RGBA16F,d=m.RGBA32F;d&&
(K=d);u&&(P=u);if((u||d)&&l(P,K,Q))return p(),!0;K=P=m.RGBA;if(l(P,K,Q))return p(),!0;r=n.RGBA8;p();return!1}}function p(){m.deleteProgram(H.ha);m.deleteTexture(Q);Q=H=null}for(var n={N:-1,uc:3,ta:2,RGBA8:0},r=n.N,h={qd:null,Zc:null,Ja:null},v=!0,A=new Uint8Array(16),D=Array(64),f=0;4>f;++f)for(var t=0;4>t;++t){var w=0===(t+f)%2?1:0,k=4*f+t;D[4*k]=w;D[4*k+1]=w;D[4*k+2]=w;D[4*k+3]=w}var m=null,J=null,H=null,Q=null,y=null;return{de:function(K){q(K);return v},Bc:function(K,P){r===n.N&&(typeof("undefined"!==
P)&&(J=P),q(K));return r!==n.RGBA8},xg:function(K){q(K);return r===n.uc},Ze:function(K){q(K);return r===n.ta},lg:function(K){q(K);return h.qd},Fe:function(K){q(K);return h.Zc},m:function(){m=null;v=!0;r=n.N;J=null}}}(),Wa={instance:function(a){var c=T.instance(a.alpha),e=T.instance(a.beta);return{te:function(){c.g(1);e.g(2)}}}},ab={instance:function(a){var c=null,e=!1,l=!1,q=null,p=!1,n=!1,r=null,h="undefined"===typeof a.preprocessing?!1:a.preprocessing,v="undefined"===typeof a.preprocessingSize?
a.size:a.preprocessingSize;a.mask&&(e=!0,b&&void 0!==b.Zd&&(a.mask=b.Zd+a.mask),c=T.instance({isFloat:!1,url:a.mask}));var A=!1;a.customInputShader&&(A="s44",I.vc({name:"_",id:A,h:a.customInputShader,Og:["uSource"],precision:"lowp"}),I.I(A,[{type:"1i",name:"_",value:0}]));switch(h){case "sobel":r="s31";p=!0;break;case "meanNormalization":r="s32";p=!0;break;case "grayScale":r="s28";p=!1;break;case "grayScaleTilt":r="s29";n=!0;p=!1;break;case "rgbGrayTilt":r="s30";n=!0;p=!1;break;case "copy":r=A?A:
"s0";break;case "inputLightRegulation":r=A?A:"s28";q=Xa.instance({Yc:v,pd:a.size,md:a.nBlurPass,Ya:!1});l=!0;break;case "inputMix0":r="none";q=$a.instance({ka:v,Pd:a.varianceMin,Ac:a.blurKernelSizePx,Ya:!1});l=!0;break;case "direct":case "none":r="abort";break;default:r="s3"}n&&I.I(r,[{name:"u26",type:"1f",value:a.tilt}]);e&&(r+="Mask");var D=T.instance({isFloat:!1,isPot:!1,width:a.size}),f={A:function(){return v},Eb:function(){return f.A()},Me:function(){return l?q.Fb():D},K:function(t){Sa.Y();"abort"!==
r&&("none"!==r&&(I.set(r),p&&I.L("u27",1/a.size),D.R(),e&&c.g(1),S.l(!1,!1),D.g(0),t=D),l&&q.process(t))},m:function(){D.remove();e&&c.remove()}};return f}},gb={instance:function(a){function c(g){q.forEach(function(C,M){p[M][0]=g[0][C];p[M][1]=g[1][C];p[M][2]=g[2][C];p[M][3]=g[3][C]});return p}"undefined"===typeof a.normalize&&(a.normalize=!1);var e={input:null,Ha:null,Kb:null,W:null,cb:null,Zb:null,$b:null},l=null,q=[],p=[],n=!1,r=null,h=!0,v=-1,A=a.isReorganize?a.isReorganize:!1,D=a.kernelsCount?
!0:!1,f=a.dynPelu?Wa.instance(a.dynPelu):!1,t=f?!0:!1,w={isEnabled:!1};a.Xe?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.fb.Eb(),h=!1):"full"===a.connectivityUp&&(a.sparsity=a.fb.Eb());var k={elu:"s15",elu01:"s16",relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",softplus:"s19",dynPelu:"s17"}[a.activation],m=a.sparsity*a.sparsity,J=!1,H=a.size,Q="";if(a.maxPooling){switch(a.maxPooling.size){case 2:Q="s33";break;case 4:Q="s34"}J=!0;H/=a.maxPooling.size;e.Zb=T.instance({isFloat:!0,isPot:!1,
width:H})}var y=void 0!==a.df&&a.df?!0:!1,K=null,P=null,u=null;if(y){K="s45"+a.index.toString();I.Wc("s45",K,[((a.normalization.n-1)/2).toFixed(1)]);I.I(K,[{type:"1i",name:"u1",value:0},{type:"2f",name:"u7",value:[1/a.size,1/a.size]},{type:"1f",name:"u6",value:a.normalization.alpha},{type:"1f",name:"u9",value:a.normalization.beta},{type:"1f",name:"u30",value:a.normalization.k}]);var d={isFloat:!0,isPot:!0,width:a.size};P=T.instance(d);u=T.instance(d)}var z=-1,G=null;h&&(e.W=T.instance({isFloat:!0,
isPot:!1,width:a.size}));e.Ha=T.instance(a.bias);var N={A:function(){return a.size},Eb:function(){return H},Pc:function(){return a.classesCount},ae:function(g){l.g(g)},hf:function(){a.remap&&a.remap.isEnabled&&(w={isEnabled:!0,$e:T.instance({isFloat:!1,isFlipY:!1,array:new Uint8Array(a.remap.maskTexture.data),width:a.remap.maskTexture.width,isPot:!1}),ab:a.remap.layers.map(function(g){return a.parent.Je(g)}),depth:a.remap.depth})},Bf:function(){switch(a.connectivityUp){case "direct":G=bb.instance(a.connectivity);
break;case "square":G=cb.instance(a.connectivity);break;case "squareFast":G=db.instance(a.connectivity,a.activation);break;case "full":G=eb.instance(a.connectivity);break;case "conv":v=a.kernelsCount,G=fb.instance(a.connectivity),A&&(e.cb=T.instance({width:H,isFloat:!0,isFlipY:!1,isPot:!1}))}if(G.qa){var g=a.size*a.sparsity;z=Math.log(g/a.size)/Math.log(2);e.input=T.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:g,Sb:z});e.Kb=T.instance({isFloat:!0,isPot:!0,width:a.size})}},K:function(g,C){l=g;G.qa?
(e.input.R(),D&&e.Ha.g(2),G.K(w),e.input.g(0),e.input.ze(z),e.Kb.R(),D?I.set("s0"):(I.set("s27"),I.L("u25",m),e.Ha.g(1)),e.input.be(z,0),S.l(!1,!1),I.set(k),y?P.u():e.W.u(),e.Kb.g(0),t&&f.te(),S.l(!1,!1)):(e.W.R(),e.Ha.g(1),G.K());y&&(I.set(K),u.u(),P.g(0),S.l(!1,!1),I.set("s46"),I.L("u6",1),e.W.u(),u.g(1),S.l(!1,!1));if(h)return J?(e.Zb.R(),e.W.g(0),I.set(Q),I.ia("u7",1/a.size,1/a.size),S.l(!1,!1),C=e.Zb):C=e.W,C.g(0),A&&(e.cb.u(),I.set("s21"),I.ia("u12",v,H/v),S.l(!1,!1),C=e.cb,e.cb.g(0)),C;var M=
e.W;a.normalize&&(I.set("gpuRawAvg"===n?"s8":"s7"),I.L("u4",1/a.size),e.$b.R(),e.W.g(0),S.l(!1,!1),M=e.$b);g=null;switch(n){case "cpuRGBA2Float":M.Ab(!1);C?g=N.kf(M).then(r):(M=N.lf(M),r(M));break;case "cpuMeanFloat":M.Ab(!0);C?g=M.pf().then(r):(M=M.qf(),r(M));break;case "gpuRawAvg":case "gpuRaw":M.g(0);case "none":null!==r&&r(M)}C&&null===g&&(g=Promise.resolve());return g},je:function(g){g&&(n=g.ac||"none",r=g.Yb||null);e.W=T.instance({isFloat:!0,isPot:!0,isMipmap:!1,width:a.size});g="undefined"!==
typeof a.classesCount&&a.classesCount?a.classesCount:a.size*a.size;for(var C=0,M=0,R=0;C<g;++C)q.push(M+(a.size-1-R)*a.size),p.push([-1,-1,-1,-1]),++M,M===a.size&&(M=0,++R);a.normalize&&(e.$b=T.instance({isFloat:!0,isPot:!0,width:a.size}))},kf:function(g){return g.mf().then(c)},lf:function(g){g=g.bc();c(g);return p},m:function(){for(var g in e){var C=e[g];C&&C.remove()}G&&(G.m(),G=null)}};a.fb&&N.Bf(a.fb);return N}};
function hb(a){var c=null,e=null,l=null,q=0;this.s=function(p){this.zf(p.ab);l.je({ac:p.ac,Yb:p.Yb})};this.Je=function(p){return c[p]};this.zf=function(p){var n=null;q=p.length;c=p.map(function(r,h){r=Object.assign({},r,{index:h,parent:this,fb:n,Xe:h===q-1});return n=h=0===h?ab.instance(r):gb.instance(r)});e=c[0];l=c[q-1];c.forEach(function(r,h){0!==h&&r.hf()})};this.K=function(p){var n=p;c.forEach(function(r){n=r.K(n,!1)});return n};this.He=function(){return e.A()};this.Ne=function(){return l.A()};
this.Fb=function(){return l.Me()};this.Pc=function(){return l.Pc()};this.m=function(){c&&(c.forEach(function(p){p.m()}),l=e=c=null,q=0)};"undefined"!==typeof a&&this.s(a)}
var bb={instance:function(a){var c=T.instance(a.weights);return{qa:!0,Qa:function(){return 1},m:function(){c.remove()},Oe:function(){return c},K:function(){I.set("s26");c.g(1);S.l(!1,!1)}}}},eb={instance:function(a){var c=a.fromLayerSize,e=T.instance(a.weights);return{qa:!0,Qa:function(){return c},m:function(){e.remove()},K:function(l){if(l.isEnabled){I.set("s24");l.$e.g(3);var q,p=Math.min(l.ab.length,l.depth);for(q=0;q<p;++q)l.ab[q].ae(4+q)}else I.set("s23");I.L("u16",a.toLayerSize);e.g(1);S.l(!1,
!1)}}}},cb={instance:function(a){for(var c=a.fromLayerSize,e=a.toLayerSize,l=a.toSparsity,q=l*e,p=q/c,n=c/e,r=0,h=0,v=0,A=Array(l*e*l*e*4),D=Array(l*e*l*e*4),f=Array(c*c),t=0;t<f.length;++t)f[t]=0;t=Math.floor(l/2);for(var w=.5/e,k=.5/c,m=.5/q,J=0;J<e;++J)for(var H=Math.round(J*n),Q=0;Q<e;++Q){var y=Math.round(Q*n),K=J/e,P=Q/e;K+=w;P+=w;for(var u=0;u<l;++u){var d=H+u-t;0>d&&(d+=c);d>=c&&(d-=c);for(var z=0;z<l;++z){var G=r/q,N=h/q,g=y+z-t;0>g&&(g+=c);g>=c&&(g-=c);var C=d/c,M=g/c;N=1-N-1/q;C+=k;M+=
k;G+=m;N+=m;var R=J*l+u,ba=Q*l+z;ba=e*l-ba-1;R=ba*e*l+R;A[4*R]=G;A[4*R+1]=N;A[4*R+2]=C;A[4*R+3]=M;M=f[g*c+d]++;R=M%p;C=d*p+R;g=g*p+(M-R)/p;g=c*p-1-g;g=g*c*p+C;D[4*g]=G;D[4*g+1]=N;D[4*g+2]=K;D[4*g+3]=P;++r>=q&&(r=0,++h);++v}}}f=null;var ca=T.instance(a.weights);delete a.weights.data;var Y=T.instance({width:q,isFloat:!0,array:new Float32Array(D),isPot:!0});D=null;var x=T.instance({width:q,isFloat:!0,array:new Float32Array(A),isPot:!0});A=null;return{qa:!0,Qa:function(){return p},m:function(){Y.remove();
x.remove();ca.remove()},K:function(){I.set("s22");ca.g(1);x.g(2);S.l(!1,!1)}}}},fb={instance:function(a){var c=a.kernelsCount,e=a.toSparsity,l=e*a.toLayerSize/a.fromLayerSize,q=T.instance(a.weights);return{qa:!0,Qa:function(){return l},rg:function(){return e},Oe:function(){return q},m:function(){q.remove()},K:function(){I.set("s25");I.L("u22",c);I.L("u23",e);I.L("u16",a.toLayerSize);I.L("u24",a.fromLayerSize);q.g(1);S.l(!1,!1)}}}},db={instance:function(a,c){var e=a.fromLayerSize,l=a.toLayerSize,q=
a.toSparsity,p=a.stride?a.stride:1,n=q*l/e,r=l<e,h=e/l,v=T.instance(a.weights),A="s47"+[e.toString(),l.toString(),q.toString(),p.toString(),c].join("_");I.xe(A)||(a=Ja(c),l=[{type:"1f",name:"u16",value:l},{type:"1f",name:"u29",value:p}],r&&l.push({type:"1f",name:"u24",value:e}),e=[(r?n:q).toFixed(1),a],r&&e.push(h.toFixed(1)),I.Wc(r?"s39":"s38",A,e),I.I(A,l.concat([{type:"1i",name:"u14",value:0},{type:"1i",name:"u21",value:1},{type:"1i",name:"u13",value:3}])));return{qa:!1,Qa:function(){return n},
m:function(){v.remove()},K:function(){I.set(A);v.g(3);S.l(!1,!1)}}}},Xa={instance:function(a){var c=a.md?a.md:3,e=a.Yc?a.Yc:64,l=a.pd?a.pd:64,q=a.Ya?!0:!1;a={isFloat:!1,width:e,isPot:!1,isFlipY:!1};var p=T.instance(a),n=T.instance(a),r=T.instance(a),h=T.instance(a),v=T.instance({isFloat:!0,width:l,isPot:!1,isFlipY:!1}),A=1/e;return{process:function(D){I.set("s35");h.u();S.l(q,!1);I.set("s36");for(var f=0;f<c;++f)p.u(),I.ia("u7",A,0),S.l(q,!1),r.u(),h.g(0),S.l(q,!1),n.u(),p.g(0),I.ia("u7",0,A),S.l(q,
!1),h.u(),r.g(0),S.l(q,!1),f!==c-1&&n.g(0);I.set("s37");v.u();D.g(0);n.g(1);h.g(2);S.l(q,!1);v.g(0)},Fb:function(){return v}}}},$a={instance:function(a){function c(v){return T.instance({isFloat:v,width:e.ka,isPot:!1,isFlipY:!1})}var e=Object.assign({Pd:.1,Ac:9,ka:128,Ya:!1},a),l=c(!1),q=[c(!1),c(!1),c(!1)],p=[c(!1),c(!1),c(!1)],n=c(!0),r=[l,p[0],p[1]];a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u31;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u31*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",
Math.round((e.Ac-1)/2).toFixed(2)).replace("2.2222",(1/e.ka).toFixed(6));var h={u1:0};I.wc([{id:"s49",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.,1.,1.);void main(){vec3 b=texture2D(u1,vv0).rgb;float a=dot(b,f);gl_FragColor=vec4(a,a,a,a);}",j:h,i:["u1"],precision:"lowp"},{id:"s50",name:"_",h:a,j:h,i:["u1","u31"],precision:"lowp"},{id:"s51",name:"_",h:"uniform sampler2D u32,u33,u34,u35;const float f=1.1111;const vec3 g=vec3(1.,1.,1.);varying vec2 vv0;void main(){vec3 a=texture2D(u32,vv0).rgb;float c=texture2D(u33,vv0).r,d=texture2D(u34,vv0).r,h=texture2D(u35,vv0).r,i=a.r*a.r;vec3 b=vec3(c,d,h),j=max(g*f,abs(i-b*b)),k=sqrt(j);gl_FragColor=vec4(a.r,(a-b)/k);}".replace("1.1111",
e.Pd.toFixed(4)),j:{u32:0,u33:1,u34:2,u35:3},i:["u32","u33","u34","u35"],precision:"highp"}]);return{process:function(){I.set("s49");l.R();S.l(e.Ya,!1);I.set("s50");for(var v=0;3>v;++v)I.ia("u31",1,0),q[v].u(),r[v].g(0),S.l(!1,!1),I.ia("u31",0,1),p[v].u(),q[v].g(0),S.l(!1,!1);I.set("s51");n.u();l.g(0);p[0].g(1);p[1].g(2);p[2].g(3);S.l(!1,!1);n.g(0)},Fb:function(){return n}}}};function ib(a,c){a[c]=!0;a.setAttribute(c,"true")}
function jb(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}function kb(){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return a&&a.length&&2<a.length?[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||0,10)]:[0,0,0]}function lb(){var a=navigator.userAgent.toLowerCase();return-1!==a.indexOf("safari")&&-1===a.indexOf("chrome")?!0:!1}function mb(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1}
function nb(a){if(!a)return a;var c=null;if(a.video){var e=function(l){return l&&"object"===typeof l?Object.assign({},l):l};c={};"undefined"!==typeof a.video.width&&(c.width=e(a.video.width));"undefined"!==typeof a.video.height&&(c.height=e(a.video.height));"undefined"!==typeof a.video.facingMode&&(c.facingMode=e(a.video.facingMode))}c={audio:a.audio,video:c};"undefined"!==typeof a.deviceId&&pb(c,a.deviceId);return c}
function pb(a,c){c&&(a.video=a.video||{},a.video.deviceId={exact:c},a.video.facingMode&&delete a.video.facingMode)}function rb(a){var c=a.video.width;a.video.width=a.video.height;a.video.height=c;return a}
function sb(a){function c(f){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(t,w){return Math.abs(t-f)-Math.abs(w-f)})}function e(f){var t=nb(a);f=f(t);q.push(f);l(f)}function l(f){if(f.video&&f.video.facingMode&&f.video.facingMode.exact){var t=f.video.facingMode.exact;f=nb(f);delete f.video.facingMode.exact;f.video.facingMode.ideal=t;q.push(f)}}var q=[];if(!a||!a.video)return q;l(a);if(a.video.width&&a.video.height){if(a.video.width.ideal&&a.video.height.ideal){var p=
c(a.video.width.ideal).slice(0,3),n=c(a.video.height.ideal).slice(0,3),r={},h=0;for(r.ea=void 0;h<p.length;r={ea:r.ea},++h){r.ea=p[h];var v={},A=0;for(v.da=void 0;A<n.length;v={da:v.da},++A)if(v.da=n[A],r.ea!==a.video.width.ideal||v.da!==a.video.height.ideal){var D=Math.max(r.ea,v.da)/Math.min(r.ea,v.da);D<4/3-.1||D>16/9+.1||e(function(f,t){return function(w){w.video.width.ideal=f.ea;w.video.height.ideal=t.da;return w}}(r,v))}}}e(function(f){return rb(f)})}a.video.width&&a.video.height&&(a.video.width.ideal&&
a.video.height.ideal&&e(function(f){delete f.video.width.ideal;delete f.video.height.ideal;return f}),e(function(f){delete f.video.width;delete f.video.height;return f}));a.video.facingMode&&(e(function(f){delete f.video.facingMode;return f}),a.video.width&&a.video.height&&e(function(f){rb(f);delete f.video.facingMode;return f}));q.push({audio:a.audio,video:!0});return q}
function tb(a){try{var c=window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(l){c=window.innerHeight>window.innerWidth}if(c&&a&&a.video){c=a.video.width;var e=a.video.height;c&&e&&c.ideal&&e.ideal&&c.ideal>e.ideal&&(a.video.height=c,a.video.width=e)}}
function ub(a){a.volume=0;ib(a,"muted");if(lb()){if(1===a.volume){var c=function(){a.volume=0;window.removeEventListener("mousemove",c,!1);window.removeEventListener("touchstart",c,!1)};window.addEventListener("mousemove",c,!1);window.addEventListener("touchstart",c,!1)}setTimeout(function(){a.volume=0;ib(a,"muted")},5)}}
function vb(a,c,e,l){function q(n){p||(p=!0,e(n))}var p=!1;navigator.mediaDevices.getUserMedia(l).then(function(n){function r(){setTimeout(function(){if(a.currentTime){var v=a.videoWidth,A=a.videoHeight;if(0===v||0===A)q("VIDEO_NULLSIZE");else{v&&(a.style.width=v.toString()+"px");A&&(a.style.height=A.toString()+"px");v={fe:null,Ef:null,af:null};try{var D=n.getVideoTracks()[0];D&&(v.af=D,v.fe=D.getCapabilities(),v.Ef=D.getSettings())}catch(f){}lb()||jb()?a.parentNode&&null!==a.parentNode?(p||c(a,n,
v),setTimeout(function(){a.play()},100)):(document.body.appendChild(a),ub(a),p||c(a,n,v),setTimeout(function(){a.style.transform="scale(0.0001,0.0001)";a.style.position="fixed";a.style.bottom="0px";a.style.right="0px";ub(a);setTimeout(function(){a.play()},100)},80)):p||c(a,n,v)}}else q("VIDEO_NOTSTARTED")},700)}function h(){a.removeEventListener("loadeddata",h,!1);var v=a.play();ub(a);"undefined"===typeof v?r():v.then(function(){r()}).catch(function(){q("VIDEO_PLAYPROMISEREJECTED")})}"undefined"!==
typeof a.srcObject?a.srcObject=n:(a.src=window.URL.createObjectURL(n),a.videoStream=n);ub(a);a.addEventListener("loadeddata",h,!1)}).catch(function(n){q(n)})}
function wb(a,c,e){var l=mb()?document.createElement("video"):!1;if(l)if(mb()){if(e&&e.video){if(jb()){var q=kb();0!==q[0]&&(12>q[0]||12===q[0]&&2>q[1])&&tb(e)}e.video.width&&e.video.width.ideal&&(l.style.width=e.video.width.ideal+"px");e.video.height&&e.video.height.ideal&&(l.style.height=e.video.height.ideal+"px")}ib(l,"autoplay");ib(l,"playsinline");e&&e.audio?l.volume=0:ib(l,"muted");vb(l,a,function(){function p(r){if(0===r.length)c("INVALID_FALLBACKCONSTRAINTS");else{var h=r.shift();vb(l,a,function(){p(r)},
h)}}var n=sb(e);p(n)},e)}else c&&c("MEDIASTREAMAPI_NOTFOUND");else c&&c("VIDEO_NOTPROVIDED")}
var xb=function(){function a(t,w,k,m,J,H){if(H===J.length)m();else{switch(J[H]){case "D":t();break;case "S":w().then(function(){f.Ld();a(t,w,k,m,J,++H)}).catch(m);return;case "R":k()}a(t,w,k,m,J,++H)}}var c={n:5,Ub:1,kd:0,Oa:[35,49],Ka:[2,200],k:.7,Lf:200,gf:.05},e=-1,l=null,q=-1,p=-1,n=0,r=-1,h=-1,v=0,A=0,D=c.Ka[1],f={Ke:function(){switch(e){case -1:return-1;case 0:return h+l.kd;case 1:return v}},Be:function(t){return Math.pow(Math.min(Math.max(r,0),l.n-1)/(l.n-1),t||1)},s:function(t){l=Object.assign({},
c,t);r=h=l.Ub;e=0;f.reset()},Ld:function(t){t=("undefined"===typeof t?Date.now():t)||0;var w=Math.min(Math.max(t-A,l.Ka[0]),l.Ka[1]);D=w;A=t;var k=-1===q?0:l.k;q=Math.min(Math.max(1E3/w,5),120)*(1-k)+q*k;t-p>l.Lf&&5<++n&&(w=l.k,r=r*(1-w)+(q<l.Oa[0]?h-1:q>l.Oa[1]?h+1:h)*w,Math.abs(r-h)>1-l.gf&&(w=Math.min(Math.max(Math.round(r),0),l.n-1),w!==h&&(r=h=w,q=(l.Oa[1]-l.Oa[0])/2)),p=t)},zd:function(t,w,k,m,J){a(t,w,k,m,J,0)},yf:function(t){v=t;e=1},Kf:function(){e=0;f.reset()},reset:function(){D=c.Ka[1];
p=q=-1;n=0},ig:function(){return D}};return f}(),yb=function(){var a={nd:4,eb:[1.5,1.5,2],ja:[.1,.1,.1],Bd:1,ka:-1,Hb:-1,Gf:2,ff:1,Dd:!0,ve:.8},c=null,e=[],l=0,q=[.5,.5,1];return{s:function(p){c=Object.assign({},a,p);e.splice(0);p=c.eb[0]*c.ja[0];var n=c.eb[1]*c.ja[1],r=1/(1+c.eb[2]*c.ja[2]),h=c.Bd*Math.min(c.ka,c.Hb),v=h/c.ka;h/=c.Hb;var A=.5*c.ve;A*=A;for(var D=0;D<c.nd;++D){var f=Math.pow(r,D),t=v*f,w=h*f;f=t*p;var k=w*n,m=t/2;w/=2;for(var J=1+(1-m-m)/f,H=1+(1-w-w)/k,Q=0;Q<H;++Q)for(var y=w+Q*
k,K=y-.5,P=0;P<J;++P){var u=m+P*f,d=u-.5;d*d+K*K>A||e.push([u,y,t*c.ff])}}c.Dd&&e.sort(function(z,G){var N=z[0]-.5;z=z[1]-.5;var g=G[0]-.5;G=G[1]-.5;return N*N+z*z-(g*g+G*G)})},get:function(){var p=e.length;if(0===p)return q;l>=p&&(l=0);var n=e[Math.floor(l)];l=(l+1/c.Gf)%p;return n}}}(),zb=function(){function a(){e(k+t.Tb);m.port.postMessage("DONE")}function c(){var d=t.O;y.isEnabled&&(d=Math.max(d,y.O));Q.Fa=0===d?window.requestAnimationFrame(e):window.requestAnimationFrame(l)}function e(d){H.na&&
null!==w&&(d-=k,d=Math.min(Math.max(d,t.Dc[0]),t.Dc[1]),k+=d,p(),y.isEnabled&&y.U&&H.V&&k-y.Pb>t.sc&&(v(),y.Pb=k),w(k))}function l(d){H.na&&(Q.timeout=window.setTimeout(e.bind(null,d),t.O))}function q(){w=null;H.na=!1;p()}function p(){Q.Fa&&(window.cancelAnimationFrame(Q.Fa),Q.Fa=null);Q.timeout&&(window.clearTimeout(Q.timeout),Q.timeout=null)}function n(d){d&&!H.V?(H.V=!0,J&&xb.Kf(),m.port.postMessage("STOP"),Ra.Md(!0),c()):!d&&H.V&&(H.V=!1,J&&xb.yf(1),Ra.Md(!1),m.port.postMessage("START"))}function r(d){d.target.hidden?
P():K()}function h(d,z,G){z=d.createShader(z);d.shaderSource(z,G);d.compileShader(z);return z}function v(){y.U=!1;var d=y.Sa,z=y.Ta,G=y.Ua,N=y.S;d.uniform1f(y.Tc,Math.random());y.oa?z.beginQueryEXT(N,G):d.beginQuery(N,G);d.drawElements(d.POINTS,1,d.UNSIGNED_SHORT,0);y.oa?z.endQueryEXT(N):d.endQuery(N);d.flush();D().then(function(g){g=t.Sd*t.qc*1E3/g;y.nb=(y.nb+1)%t.sa;y.Rb[y.nb]=g;if(++y.fd>t.sa){y.$a.set(y.Rb);y.$a.sort();g=y.$a[Math.floor(t.sa/2)];y.Ma=Math.max(y.Ma,g);var C;for(C=0;C<y.mc&&!(g>
y.Ma*(1-(t.rc[C]+t.Td*(C>=y.lb?1:-1))));++C)C===y.mc-1&&++C;C!==y.lb&&(console.log("THERMAL THROTTLING LEVEL = "+C.toString()),y.lb=C,y.O=0===C?0:t.Rd[C-1],t.pc&&t.pc(C))}y.U=!0}).catch(function(){y.U=!0})}function A(d){var z=y.Sa,G=y.Ta,N=y.Ua;N=y.oa?G.cg(N,G.QUERY_RESULT_AVAILABLE_EXT):z.getQueryParameter(N,z.QUERY_RESULT_AVAILABLE);z=z.getParameter(G.GPU_DISJOINT_EXT);N?d(!z):setTimeout(A.bind(null,d),.1)}function D(){return new Promise(function(d,z){A(function(G){if(G){G=y.Sa;var N=y.Ta,g=y.Ua;
G=y.oa?N.getQueryObjectEXT(g,N.QUERY_RESULT_EXT):G.getQueryParameter(g,G.QUERY_RESULT);d(G)}else z()})})}var f={cd:!0,Dc:[1,200],Tb:20,O:0,Ud:!1,qc:50,Sd:240,sc:3E3,sa:3,rc:[.2,.35,.5],Td:.05,Rd:[8,20,40],pc:null},t=null,w=null,k=0,m=null,J=!1,H={ga:!1,V:!0,Ob:!1,Nb:!1,Mb:!1,na:!1},Q={Fa:null,timeout:null},y={isEnabled:!1,U:!1,Sa:null,Ta:null,Ua:null,S:null,Tc:null,oa:!0,lb:0,mc:0,O:0,Pb:0,fd:0,Rb:null,$a:null,nb:0,Ma:0},K=n.bind(null,!0),P=n.bind(null,!1),u={s:function(d){t=Object.assign(f,d);Object.assign(H,
{V:!0,ga:!0,na:!1});if(t.Ud){d=document.createElement("canvas");d.setAttribute("width","1");d.setAttribute("height","1");var z={antialias:!1};d=d.getContext("webgl2",z)||d.getContext("webgl",z);if(z=d.getExtension("EXT_disjoint_timer_query")||d.getExtension("EXT_disjoint_timer_query_webgl2")){y.Sa=d;y.Ta=z;y.isEnabled=!0;y.oa=z.beginQueryEXT?!0:!1;var G=h(d,d.VERTEX_SHADER,"attribute vec4 a0;void main(){gl_Position=a0;}"),N=h(d,d.FRAGMENT_SHADER,"precision lowp float;uniform float u36;void main(){vec4 a=u36*vec4(1.,2.,3.,4.);for(int b=0;b<666;b+=1)a=cos(a);gl_FragColor=a;}".replace("666",
t.qc.toString())),g=d.createProgram();d.attachShader(g,G);d.attachShader(g,N);d.linkProgram(g);G=d.getAttribLocation(g,"a0");y.Tc=d.getUniformLocation(g,"u36");d.useProgram(g);d.enableVertexAttribArray(G);g=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,g);d.bufferData(d.ARRAY_BUFFER,new Float32Array([.5,.5,0,1]),d.STATIC_DRAW);d.vertexAttribPointer(G,4,d.FLOAT,!1,16,0);g=d.createBuffer();d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,g);d.bufferData(d.ELEMENT_ARRAY_BUFFER,new Uint16Array([0]),d.STATIC_DRAW);
d.disable(d.DEPTH_TEST);d.disable(d.DITHER);d.disable(d.STENCIL_TEST);d.viewport(0,0,1,1);g=y.oa?z.createQueryEXT():d.createQuery();y.Ua=g;y.S=z.TIME_ELAPSED_EXT||d.TIME_ELAPSED;y.lb=0;y.mc=t.rc.length;y.O=0;y.Pb=-t.sc;y.Rb=new Float32Array(t.sa);y.$a=new Float32Array(t.sa);y.Ma=0;y.nb=0;y.fd=0;y.U=!0}}if(t.cd){d=!1;try{if("undefined"===typeof SharedWorker){var C=URL.createObjectURL(new Blob(["let handler = null;\n      self.addEventListener('message', function(e){\n        if (handler !== null){\n          clearTimeout(handler);\n          handler = null;\n        }\n        switch (e.data) {\n          case 'START':\n          case 'DONE':\n            handler = setTimeout(function(){\n              self.postMessage('TICK');\n            }, "+
t.Tb.toString()+");\n            break;\n          case 'STOP':\n            break;\n        };\n      }, false);"],{type:"text/javascript"})),M=new Worker(C);M.addEventListener("message",a);m={rd:M,port:M};H.Ob=!0}else{var R=URL.createObjectURL(new Blob(["let handler = null;\n      onconnect = function(e) {\n        const port = e.ports[0];\n        port.addEventListener('message', function(e) {\n          \n          if (handler !== null){\n            clearTimeout(handler);\n            handler = null;\n          }\n          switch (e.data) {\n            case 'START':\n            case 'DONE':\n              handler = setTimeout(function(){\n                port.postMessage('TICK');\n              }, "+
t.Tb.toString()+");\n              break;\n            case 'STOP':\n              break;\n          };\n          \n        });\n        \n        port.start();\n      } // end onconnect()"],{type:"text/javascript"})),ba=new SharedWorker(R);ba.port.start();ba.port.addEventListener("message",a);m={rd:ba,port:ba.port};H.Nb=!0}d=!0}catch(ca){}d&&("onvisibilitychange"in document?document.addEventListener("visibilitychange",r):(window.addEventListener("blur",P),window.addEventListener("focus",K)),H.Mb=
!0)}J="undefined"!==typeof xb},m:function(){q();H.Mb&&("onvisibilitychange"in document?document.removeEventListener("visibilitychange",r):(window.removeEventListener("blur",P),window.removeEventListener("focus",K)),H.Mb=!1);H.Nb?(m.port.close(),H.Nb=!1):H.Ob&&(m.rd.terminate(),H.Ob=!1);Object.assign(H,{V:!0,ga:!1,na:!1});w=null},Bg:function(){return H.V},update:function(d){Object.assign(t,d)},zd:function(d){H.ga||u.s({});p();H.na=!0;w=d;H.V&&c()},stop:q};return u}(),Ab=function(){var a=0,c=null,e=
null,l=null,q=null;return{s:function(p,n){a=p.length;c=n;e=p;l=new Float32Array(a);q=new Float32Array(a)},Le:function(){return q},Ff:function(p,n,r){p.forEach(function(h,v){var A=Math.min(1,e[v]*r*(n+.33*(1-n)));h=A*h+(1-A)*l[v];l[v]=h;h=c[v](h);h=Math.min(Math.max(h,0),1);q[v]=h})}}}(),X={VERSION:"1.2.8",la:[],rb:!1,sb:!1,qb:!1,Ea:!0,Da:!1,ready:!1,initialized:!1},Bb={facingMode:"user",idealWidth:800,idealHeight:600,minWidth:240,maxWidth:1280,minHeight:240,maxHeight:1280,isAudio:!0},b={neuralNetworkPath:"jeelizFaceExpressionsNNC.json",
tc:"../../",O:0,width:512,height:512,Hf:30,Cd:[.6,5.8],ja:[.06,.08,.15],xf:.7,vf:2,wf:[2,2,2],threshold:.7,ue:.08,ye:.02,Xd:[.03,1],Pf:20,Re:!1,pb:[2,7],H:{Uc:[3,7],quality:[0,6],position:[0,7],rotation:[5,7]},Wb:11,ld:1,bf:1,xc:[.1,.01],tf:[.4,-.7,-.4],uf:[.3,0,0],se:!1,Yd:.001,yc:[Math.PI/10,Math.PI/6],td:[.1,.4],ud:[.009,.02],vd:[.02,.04],Vb:5,Vc:.05,Wd:[.2,.2,.15,.15,.15,.15,1,.2,.15,.15,.2],cf:[Ia.bind(null,.1,.7),Ia.bind(null,.1,.7),Ia.bind(null,0,.4),Ia.bind(null,0,.4),Ia.bind(null,.05,.6),
Ia.bind(null,.05,.6),Ia.bind(null,.02,.3),Ia.bind(null,.3,.5),Ia.bind(null,.7,.8),Ia.bind(null,.7,.8),Ia.bind(null,.15,.5)]};X.get_nMorphs=function(){return b.Wb};var Cb=null,Db=null,Eb=null,Fb=[];
function Gb(){function a(){1===++M&&(Ab.s(b.Wd,b.cf),c(),X.ready=!0,X.la.forEach(function(B){B()}),X.la.splice(0,X.la.length),e(),M=0)}function c(){H=new Float32Array(b.Wb);Q=new Float32Array(b.Wb);y=new Uint8Array(w*w*4);X.get_morphTargetInfluences=function(){return H};X.get_morphTargetInfluencesStabilized=function(){return Ab.Le()};X.set_morphUpdateCallback=function(B){K=B};X.get_rotation=function(){return d};X.get_positionScale=function(){var B=m.Jd.Ie();B.Ab(!1);B=B.bc();N[0]=1-B[1][0];N[1]=B[2][0];
N[2]=B[3][0]*k[0];return N};X.get_rotationStabilized=function(){return G};X.switch_sleep=function(B){ba!==R.hc||B?ba=B?R.hc:R.play:e()};X.on_detect=function(B){B(ca.T);ca.Xb.push(B)};X.is_detected=function(){return ca.T};X.set_animateDelay=function(B){f=B;zb.update({O:f})}}function e(){ba!==R.play&&(ba=R.play,zb.stop(),l())}function l(){var B,L;return Ba(new va(new ma(function(aa){switch(aa.ba){case 1:a:{if("VIDEO"===C.element.nodeName){var O=C.element.currentTime-x;0>O&&(x=C.element.currentTime);
if(1E3*O<b.Pf)break a;x+=O}C.ra.refresh();O=ja.Rc();O[0]===C.Ia[0]&&O[1]===C.Ia[1]||ja.Od()}B=xb.Ke();L=0;case 2:if(!(L<B)){aa.ba=4;break}O=m;var ta=t;I.set("s53");Sa.Y();O.Wa.R();C.ra.g(0);O.jb.g(1);S.l(!1,!1);O.Wa.g(0);ta.K(O.Wa);b.Re?O=T.sf(P,y).then(q):(T.rf(P,y),q(),O=Promise.resolve());aa.ba=3;return{value:O};case 3:++L;aa.ba=2;break;case 4:O=m,Sa.Y(),J.R(),I.set("s56"),O.jb.g(0),S.l(!1,!1),O=xb.Be(),g=3*(1-O)+1*O,xb.Ld(),X.Ea&&(Sa.Jf(),I.set("s52"),C.ra.g(0),S.l(!1,!1),F.enable(F.BLEND),F.blendFunc(F.SRC_ALPHA,
F.ONE),J.g(0),S.l(!1,!1),F.disable(F.BLEND)),F.flush(),ba!==R.hc&&zb.zd(l),aa.ba=0}})))}function q(){r();if(!b.se&&ca.T)for(var B=0;3>B;++B){var L=n(B+b.H.rotation[0],b.H.rotation[1]);L=(2*L-1)*b.tf[B];L+=b.uf[B];u[B]=L}p();B=Date.now();L=B-Y.hd;var aa=n(b.H.quality[0],b.H.quality[1]);Y.sd=Ia(b.td[0],b.td[1],aa);aa=n(b.H.position[0],b.H.position[1]);var O=n(b.H.position[0]+1,b.H.position[1]),ta=n(b.H.position[0]+2,b.H.position[1]);Y.Ad=1-Ia(b.vd[0],b.vd[1],Math.sqrt(aa*aa+O*O+ta*ta)/L);aa=Y.pa[0]-
u[0];O=Y.pa[1]-u[1];ta=Y.pa[2]-u[2];L=Math.sqrt(aa*aa+O*O+ta*ta)/L;Y.pa[0]=u[0];Y.pa[1]=u[1];Y.pa[2]=u[2];Y.wd=1-Ia(b.ud[0],b.ud[1],L);Y.P=Y.sd*Y.Ad*Y.wd;Y.hd=B;Y.gd[Y.Qb]=Y.P;Y.Qb=(Y.Qb+1)%b.Vb;for(B=0;B<b.Vb;++B)Y.P=Math.min(Y.gd[B],Y.P);Ab.Ff(H,Y.P,g,Q);K&&K(Y.P,g);if(ca.T)for(B=b.xc[1]*Y.P+b.xc[0]*(1-Y.P),B*=g,L=0;3>L;++L)d[L]=B*u[L]+(1-B)*d[L],G[L]=d[L];else B=Date.now()*b.Yd,z[0]=b.yc[0]*Math.sin(B),z[1]=b.yc[1]*Math.cos(B),G[0]=z[0],G[1]=z[1],G[2]=z[2]}function p(){var B=n(b.H.Uc[0],b.H.Uc[1]);
ca.Xa=b.Vc*B+(1-b.Vc)*ca.Xa;.6<ca.Xa&&!ca.T?(ca.Xb.forEach(function(L){L(!0)}),ca.T=!0):.4>ca.Xa&&ca.T&&(ca.Xb.forEach(function(L){L(!1)}),ca.T=!1)}function n(B,L){B+=w*L;return(y[4*B]+y[4*B+1]+y[4*B+2]+y[4*B+3])/1020}function r(){H.forEach(function(B,L){if(ca.T){var aa=(b.ld+L)%w,O=b.bf+Math.floor((b.ld+L)/w);O=w-1-O;aa+=w*O;O=y.slice(4*aa,4*aa+4);aa=(O[0]+O[1]+O[2]+O[3])/1020;O=b.ye*Math.sqrt((O[0]*O[0]+O[1]*O[1]+O[2]*O[2]+O[3]*O[3])/1020-aa*aa);H[L]=B>aa-O&&B<aa+O?B:aa}else H[L]=0})}function h(B){t=
new hb({ab:B.layers,ac:"gpuRaw",Yb:function(L){var aa=m;aa.jb.Gd(1);F.viewport(0,0,1,1);I.set("s54");I.L("u37",Y.P);I.Hd("u38",yb.get());I.Hd("u39",b.ja);S.l(!1,!1);aa.Jd.Gd(1);I.set("s55");I.L("u37",Y.P);aa.jb.g(0);S.l(!1,!1);P=L}});B=t.He();B!==D&&(D=B,ja.Xc(),m.Wa.resize(D,D),ja.Id());w=t.Ne();a()}var v=-1,A=-1,D=64,f=b.O,t=null,w=0,k=null,m={},J=null,H=null,Q=null,y=null,K=null,P=null,u=[0,0,0],d=[0,0,0],z=[0,0,0],G=[0,0,0],N=[0,0,0],g=1,C={Of:[.5,.5],Nf:[.5,.5],element:null,ra:null,Ia:[-1,-1]},
M=0,R={oe:-4,ef:-3,Cg:-2,hc:-1,play:0},ba=R.ef,ca={Xa:0,T:!1,Xb:[]},Y={P:1,Ad:1,sd:1,wd:1,pa:[0,0,0],hd:Date.now(),gd:new Float32Array(b.Vb),Qb:0},x=0,ja={Xc:function(){v=b.width;A=b.height;yb.s({eb:b.wf,nd:b.vf,ka:v,Hb:A,Bd:b.xf,ja:b.ja,Dd:!0});k=[1,v/A]},Id:function(){I.I("s52",[{type:"1i",name:"u1",value:0}]);I.I("s53",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u40",value:1},{type:"2f",name:"u41",value:k}]);I.I("s56",[{type:"1i",name:"u40",value:0},{type:"2f",name:"u41",value:k},{type:"3f",
name:"u42",value:[0,.5,1]}]);I.I("s54",[{type:"1i",name:"u43",value:0},{type:"1i",name:"u40",value:1},{type:"1f",name:"u44",value:b.Cd[0]},{type:"1f",name:"u45",value:b.Cd[1]},{type:"1f",name:"u46",value:b.Hf},{type:"1f",name:"u47",value:b.threshold},{type:"1f",name:"u48",value:b.ue},{type:"1f",name:"u49",value:k[0]}]);I.I("s55",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u5",value:1},{type:"2f",name:"u50",value:b.Xd}])},ke:function(){I.wc([{id:"s52",name:"_",Ca:"attribute vec2 a0;uniform vec2 u51,u52;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=u52+u51*a0;}",
Ga:["a0"],va:[2],h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1","u51","u52"],precision:"lowp"},{id:"s53",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",Ca:"attribute vec2 a0;uniform sampler2D u40;uniform vec2 u41,u51,u52;const vec2 f=vec2(.25,.5),i=vec2(.75,.5),e=vec2(.5,.5);varying vec2 vv0;void main(){vec4 a=texture2D(u40,f);vec2 b=a.gb,c=a.a*u41,d=a0*.5+e,h=b+(d-e)*c;vv0=u52+u51*2.*(h-.5),gl_Position=vec4(a0,0.,1.);}",
Ga:["a0"],va:[2],i:["u1","u40","u41","u51","u52"],precision:"lowp"},{id:"s54",name:"_",Ca:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",h:"uniform sampler2D u43,u40;uniform vec3 u38,u39;uniform float u44,u45,u46,u47,u49,u37,u48;varying vec2 vv0;const vec4 e=vec4(.25,.25,.25,.25);void main(){vec4 g=texture2D(u43,vec2(.4375,.9375)),h=texture2D(u43,vec2(.5625,.9375));float i=dot(g-h,e);bool j=i>u47;vec4 a=texture2D(u40,vec2(.5,.5));j?a.r=2.:a.r>u46?a.r=0.:a.r>1.9&&(a.a>u45||a.a<u44)?a.r=0.:a.r>1.9?a.r+=1.:0.;if(a.r<.9)a.gba=u38,a.r=1.;else{float c=dot(e,texture2D(u43,vec2(.0625,.9375))),d=dot(e,texture2D(u43,vec2(.1875,.9375))),f=dot(e,texture2D(u43,vec2(.3125,.9375))),b;a.r>1.9?(b=1.-u37,b*=1.-step(abs(c),u48)*step(abs(d),u48)*step(abs(f),u48)):(b=1.,a.r=0.);float k=a.a*u49;a.gba+=vec3(c,d,f)*u39*b*k;}gl_FragColor=a;}",
i:"u43 u40 u38 u44 u45 u46 u47 u39 u49 u37 u48".split(" ")},{id:"s56",name:"_",h:"uniform sampler2D u40;uniform vec3 u42;uniform vec2 u41;varying vec2 vv0;const vec2 i=vec2(1.,1.);void main(){vec4 f=texture2D(u40,vec2(.25,.5));vec2 g=f.gb;float j=f.a;vec2 a=j*u41,c=g+a,d=g;d-=a/2.,c-=a/2.;vec2 k=.5*(d+c),h=step(d,vv0)*step(vv0,c);float l=h.x*h.y;vec2 b=2.*abs(k-vv0)/a;b=pow(b,3.*i),gl_FragColor=vec4(l*u42*max(b.x,b.y),1.);}",i:["u40","u41","u42"],precision:"lowp"},{id:"s55",name:"_",h:"uniform sampler2D u1,u5;uniform vec2 u50;uniform float u37;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);float c=(1.-u37)*(u50.y-u50.x)+u50.x;gl_FragColor=mix(b,a,c*f);}",
i:["u1","u5","u50","u37"]}])},Qe:function(B){var L=new Float32Array([0,.5,.5,0]);B.Wa=T.instance({isPot:!0,isFloat:!1,width:D});L={width:1,height:1,isFloat:!0,isPot:!1,array:L};B.jb=Va.instance(L);B.Jd=Va.instance(L)},le:function(){C.ra=T.instance({C:C.element,isPot:!1,isFloat:!1,isFlipY:!0});J=T.instance({isPot:!1,isFloat:!1,width:v,height:A})},s:function(){ja.le();ja.Qe(m);zb.s({cd:!1,O:f});xb.s({Ub:0,n:b.pb[1]-b.pb[0]+1,kd:b.pb[0]});Eb?h(Eb):Da(function(B){B=JSON.parse(B);h(B)})},m:function(){zb.stop();
t&&(t.m(),t=null);ba=R.oe},ge:function(B){X.rb&&X.rb();var L={video:{facingMode:{ideal:Bb.facingMode},width:{min:Bb.minWidth,max:Bb.maxWidth,ideal:Bb.idealWidth},height:{min:Bb.minHeight,max:Bb.maxHeight,ideal:Bb.idealHeight}},audio:Bb.isAudio};pb(L,Bb.deviceId);wb(function(aa,O){Cb=O;X.sb&&X.sb();B(aa)},function(){window.ob&&window.ob("WEBCAM_UNAVAILABLE")},L)},jd:function(B,L){ja.ke();C.element=B;Db=C.element;ja.Od();ja.Xc();ja.Id();ja.s();L&&L()},Rc:function(){var B=[-1,-1],L=C.element;"VIDEO"===
L.nodeName?(B[0]=L.videoWidth,B[1]=L.videoHeight):(B[0]=L.width,B[1]=L.height);return B},Od:function(){var B=ja.Rc();C.Ia[0]=B[0];C.Ia[1]=B[1];Ta.Pa().width=B[0];Ta.Pa().height=B[1];b.width=B[0];b.height=B[1];var L=C.Of,aa=C.Nf,O=B[1]/B[0];B=Ta.J()/Ta.A();O>B?1>=O?L[0]*=O:L[1]/=O:(L[0]*=O,O=1/B,L[0]*=O,L[1]*=O);L[1]*=B;L=[{type:"2f",name:"u51",value:L},{type:"2f",name:"u52",value:aa}];I.I("s53",[{type:"1i",name:"u1",value:0}].concat(L));I.I("s52",L)}};Fb.push(ja);return ja}
X.onLoad=function(a){X.ready?a():X.la.push(a)};X.switch_displayVideo=function(a){X.Ea=a;X.Da&&(X.Da.style.display=X.Ea?"block":"none")};X.onWebcamAsk=function(a){X.rb=a};X.onContextLost=function(a){X.qb=a};X.onWebcamGet=function(a){X.sb=a};X.destroy=function(){zb.m();Db&&Db.srcObject&&Db.srcObject.getTracks().forEach(function(a){a.stop()});Fb.forEach(function(a){a.m()});Fb.splice(0);Ta.m();X.switch_displayVideo(!1);X.initialized=!1;X.la.splice(0)};X.set_size=function(a,c){b.width=a;b.height=c};
X.get_size=function(){return{width:b.width,height:b.height}};X.get_videoStream=function(){return Cb};X.get_video=function(){return Db};X.get_cv=function(){return Ta.Pa()};X.set_color=function(a){I.I("s56",[{type:"3f",name:"u42",value:a}])};
X.init=function(a){var c=Gb(),e=a.callbackReady?a.callbackReady:function(p){console.log("ERR:",p)},l=a.callbackReady?a.callbackReady.bind(null,!1):!1;if(a.canvasId||a.canvas){var q=a.canvas?a.canvas:document.getElementById(a.canvasId);if(q)if(X.initialized)e("ALREADY_INITIALIZED");else{X.initialized=!0;window.ob=e?function(p){e(p);window.ob=!1}:!1;a.NNCPath&&(b.tc=a.NNCPath);"undefined"!==typeof a.NNC&&(Eb="string"===typeof a.NNC?JSON.parse(a.NNC):a.NNC);l&&X.la.push(l);if(!Ta.s({yb:q,width:b.width,
height:b.height,debug:!1,Lb:!1,od:function(){X.qb&&X.qb()},premultipliedAlpha:!1}))return e("GL_INCOMPATIBLE"),!1;X.Da=Ta.Pa();X.Ea||(X.Da.style.display="none");a.videoSettings&&a.videoSettings.videoElement?c.jd(a.videoSettings.videoElement,!1):(a.videoSettings&&Object.assign(Bb,a.videoSettings),c.ge(function(p){c.jd(p,!1)}));return!0}else e("INVALID_CANVAS")}else e("NO_CANVASID")};window.JEELIZFACEEXPRESSIONS=X;
;return JEELIZFACEEXPRESSIONS||window.JEELIZFACEEXPRESSIONS;})();